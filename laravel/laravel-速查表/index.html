<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="//fonts.googleapis.com/css?family=Comic Sans MS:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"senkorl.xyz","root":"/","scheme":"Muse","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Composer12345678910111213composer create-project laravel&#x2F;laravel folder_namecomposer create-project laravel&#x2F;laravel folder_name --prefer-dist &quot;5.8.*&quot;composer installcomposer install --prefer">
<meta property="og:type" content="article">
<meta property="og:title" content="「Laravel」速查表">
<meta property="og:url" content="https://senkorl.xyz/laravel/laravel-%E9%80%9F%E6%9F%A5%E8%A1%A8/index.html">
<meta property="og:site_name" content="Senkorl">
<meta property="og:description" content="Composer12345678910111213composer create-project laravel&#x2F;laravel folder_namecomposer create-project laravel&#x2F;laravel folder_name --prefer-dist &quot;5.8.*&quot;composer installcomposer install --prefer">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-11-02T04:02:01.000Z">
<meta property="article:modified_time" content="2018-11-02T04:02:01.000Z">
<meta property="article:author" content="Senkorl">
<meta property="article:tag" content="Laravel">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://senkorl.xyz/laravel/laravel-%E9%80%9F%E6%9F%A5%E8%A1%A8/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>「Laravel」速查表 | Senkorl</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Senkorl</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">专注于最有价值的事情.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/myhome/" rel="section"><i class="fa fa-fw fa-home"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>分类</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>标签</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-fw fa-user"></i>关于</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://senkorl.xyz/laravel/laravel-%E9%80%9F%E6%9F%A5%E8%A1%A8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="Senkorl">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Senkorl">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          「Laravel」速查表
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2018-11-02 12:02:01" itemprop="dateCreated datePublished" datetime="2018-11-02T12:02:01+08:00">2018-11-02</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Laravel/" itemprop="url" rel="index"><span itemprop="name">Laravel</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Composer"><a href="#Composer" class="headerlink" title="Composer"></a>Composer</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">composer create-project laravel/laravel folder_name</span><br><span class="line">composer create-project laravel/laravel folder_name --prefer-dist <span class="string">&quot;5.8.*&quot;</span></span><br><span class="line">composer install</span><br><span class="line">composer install --prefer-dist</span><br><span class="line">composer update</span><br><span class="line">composer update package/name</span><br><span class="line">composer dump-autoload [--optimize]</span><br><span class="line">composer <span class="built_in">self</span>-update</span><br><span class="line">composer <span class="keyword">require</span> [options] [--] [vendor/packages]...</span><br><span class="line"><span class="comment">// 全局安装</span></span><br><span class="line">composer <span class="keyword">require</span> <span class="keyword">global</span> vendor/packages</span><br><span class="line"><span class="comment">// 罗列所有扩展包括版本信息</span></span><br><span class="line">composer show</span><br></pre></td></tr></table></figure>

<h2 id="Artisan"><a href="#Artisan" class="headerlink" title="Artisan"></a>Artisan</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 针对命令显示帮助信息</span></span><br><span class="line">php artisan --help <span class="keyword">OR</span> -h</span><br><span class="line"><span class="comment">// 抑制输出信息</span></span><br><span class="line">php artisan --quiet <span class="keyword">OR</span> -q</span><br><span class="line"><span class="comment">// 打印 Laravel 的版本信息</span></span><br><span class="line">php artisan --version <span class="keyword">OR</span> -V</span><br><span class="line"><span class="comment">// 不询问任何交互性的问题</span></span><br><span class="line">php artisan --no-interaction <span class="keyword">OR</span> -n</span><br><span class="line"><span class="comment">// 强制输出 ANSI 格式</span></span><br><span class="line">php artisan --ansi</span><br><span class="line"><span class="comment">// 禁止输出 ANSI 格式</span></span><br><span class="line">php artisan --no-ansi</span><br><span class="line"><span class="comment">// 显示当前命令行运行的环境</span></span><br><span class="line">php artisan --env</span><br><span class="line"><span class="comment">// -v|vv|vvv 通过增加 v 的个数来控制命令行输出内容的详尽情况: 1 个代表正常输出, 2 个代表输出更多消息, 3 个代表调试</span></span><br><span class="line">php artisan --verbose</span><br><span class="line"><span class="comment">// 移除编译优化过的文件 (storage/frameworks/compiled.php)</span></span><br><span class="line">php artisan clear-compiled</span><br><span class="line"><span class="comment">// 显示当前框架运行的环境</span></span><br><span class="line">php artisan env</span><br><span class="line"><span class="comment">// 显示某个命令的帮助信息</span></span><br><span class="line">php artisan help</span><br><span class="line"><span class="comment">// 显示所有可用的命令</span></span><br><span class="line">php artisan <span class="keyword">list</span></span><br><span class="line"><span class="comment">// 进入应用交互模式</span></span><br><span class="line">php artisan tinker</span><br><span class="line"><span class="comment">// 配合 dump() 函数调试数据</span></span><br><span class="line">php artisan dump-server</span><br><span class="line"><span class="comment">// 进入维护模式</span></span><br><span class="line">php artisan down</span><br><span class="line"><span class="comment">// 退出维护模式</span></span><br><span class="line">php artisan up</span><br><span class="line"><span class="comment">// 优化框架性能</span></span><br><span class="line"> <span class="comment">// --force    强制编译已写入文件 (storage/frameworks/compiled.php)</span></span><br><span class="line"> <span class="comment">// --psr      不对 Composer 的 dump-autoload 进行优化</span></span><br><span class="line">php artisan optimize [--force] [--psr]</span><br><span class="line"><span class="comment">// 更改前端预设</span></span><br><span class="line"><span class="comment">// type_name (可以是 none, bootstrap, vue, react)</span></span><br><span class="line">php artisan preset [options] [--] type_name</span><br><span class="line"><span class="comment">// 启动内置服务器</span></span><br><span class="line">php artisan serve</span><br><span class="line"><span class="comment">// 更改默认端口</span></span><br><span class="line">php artisan serve --port <span class="number">8080</span></span><br><span class="line"><span class="comment">// 使其在本地服务器外也可正常工作</span></span><br><span class="line">php artisan serve --host <span class="number">0.0</span>.<span class="number">0.0</span></span><br><span class="line"><span class="comment">// 更改应用命名空间</span></span><br><span class="line">php artisan app:name <span class="keyword">namespace</span></span><br><span class="line">// 清除过期的密码重置令牌</span><br><span class="line"><span class="title">php</span> <span class="title">artisan</span> <span class="title">auth</span>:<span class="title">clear</span>-<span class="title">resets</span></span><br><span class="line"></span><br><span class="line">// 清空应用缓存</span><br><span class="line"><span class="title">php</span> <span class="title">artisan</span> <span class="title">cache</span>:<span class="title">clear</span></span><br><span class="line">// 移除 <span class="title">key_name</span> 对应的缓存</span><br><span class="line"><span class="title">php</span> <span class="title">artisan</span> <span class="title">cache</span>:<span class="title">forget</span> <span class="title">key_name</span> [&lt;<span class="title">store</span>&gt;]</span><br><span class="line">// 创建缓存数据库表 <span class="title">migration</span></span><br><span class="line"><span class="title">php</span> <span class="title">artisan</span> <span class="title">cache</span>:<span class="title">table</span></span><br><span class="line"></span><br><span class="line">// 合并所有的配置信息为一个，提高加载速度</span><br><span class="line"><span class="title">php</span> <span class="title">artisan</span> <span class="title">config</span>:<span class="title">cache</span></span><br><span class="line">// 移除配置缓存文件</span><br><span class="line"><span class="title">php</span> <span class="title">artisan</span> <span class="title">config</span>:<span class="title">clear</span></span><br><span class="line"></span><br><span class="line">// 程序内部调用 <span class="title">Artisan</span> 命令</span><br><span class="line">$<span class="title">exitCode</span> = <span class="title">Artisan</span>::<span class="title">call</span>(&#x27;<span class="title">config</span>:<span class="title">cache</span>&#x27;);</span><br><span class="line"><span class="comment">// 运行所有的 seed 假数据生成类</span></span><br><span class="line"> <span class="comment">// --class      可以指定运行的类，默认是: &quot;DatabaseSeeder&quot;</span></span><br><span class="line"> <span class="comment">// --database   可以指定数据库</span></span><br><span class="line"> <span class="comment">// --force      当处于生产环境时强制执行操作</span></span><br><span class="line">php artisan db:seed [--<span class="class"><span class="keyword">class</span>[=&quot;...&quot;]] [--<span class="title">database</span>[=&quot;...&quot;]] [--<span class="title">force</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 基于注册的信息，生成遗漏的 <span class="title">events</span> 和 <span class="title">handlers</span></span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">event</span>:<span class="title">generate</span></span></span><br><span class="line"><span class="class">// 罗列所有事件和监听器</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">event</span>:<span class="title">list</span></span></span><br><span class="line"><span class="class">// 缓存事件和监听器</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">event</span>:<span class="title">cache</span></span></span><br><span class="line"><span class="class">// 清除事件和监听器缓存</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">event</span>:<span class="title">clear</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 生成新的处理器类</span></span><br><span class="line"><span class="class"> // --<span class="title">command</span>      需要处理器处理的命令类名字</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">handler</span>:<span class="title">command</span> [--<span class="title">command</span>=&quot;...&quot;] <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的时间处理器类</span></span><br><span class="line"><span class="class"> // --<span class="title">event</span>        需要处理器处理的事件类名字</span></span><br><span class="line"><span class="class"> // --<span class="title">queued</span>       需要处理器使用队列话处理的事件类名字</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">handler</span>:<span class="title">event</span> [--<span class="title">event</span>=&quot;...&quot;] [--<span class="title">queued</span>] <span class="title">name</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 生成应用的 <span class="title">key</span>（会覆盖）</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">key</span>:<span class="title">generate</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 发布本地化翻译文件到 <span class="title">resources</span> 文件下</span></span><br><span class="line"><span class="class">// <span class="title">locales</span>: 逗号分隔，如 <span class="title">zh_CN</span>,<span class="title">tk</span>,<span class="title">th</span> [默认是: &quot;<span class="title">all</span>&quot;]</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">lang</span>:<span class="title">publish</span> [<span class="title">options</span>] [--] [&lt;<span class="title">locales</span>&gt;]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 创建用户认证脚手架</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">auth</span></span></span><br><span class="line"><span class="class">// 创建 <span class="title">Channel</span> 类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">channel</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 在默认情况下, 这将创建未加入队列的自处理命令</span></span><br><span class="line"><span class="class"> // 通过 --<span class="title">handler</span> 标识来生成一个处理器, 用 --<span class="title">queued</span> 来使其入队列.</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">command</span> [--<span class="title">handler</span>] [--<span class="title">queued</span>] <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的 <span class="title">Artisan</span> 命令</span></span><br><span class="line"><span class="class"> //  --<span class="title">command</span>     命令被调用的名称。 (默认为: &quot;<span class="title">command</span>:<span class="title">name</span>&quot;)</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">console</span> [--<span class="title">command</span>[=&quot;...&quot;]] <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的资源控制器</span></span><br><span class="line"><span class="class"> // --<span class="title">plain</span>      生成一个空白的控制器类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">controller</span> [--<span class="title">plain</span>] <span class="title">name</span></span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">controller</span> <span class="title">App</span>\\<span class="title">Admin</span>\\<span class="title">Http</span>\\<span class="title">Controllers</span>\\<span class="title">DashboardController</span></span></span><br><span class="line"><span class="class">// 创建一个新的事件类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">event</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建异常类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">exception</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建模型工厂类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">factory</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个队列任务文件</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">job</span> </span></span><br><span class="line"><span class="class">// 创建一个监听者类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">listener</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的邮件类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">mail</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的中间件类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">middleware</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的迁移文件</span></span><br><span class="line"><span class="class"> // --<span class="title">create</span>     将被创建的数据表.</span></span><br><span class="line"><span class="class"> // --<span class="title">table</span>      将被迁移的数据表.</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">migration</span> [--<span class="title">create</span>[=&quot;...&quot;]] [--<span class="title">table</span>[=&quot;...&quot;]] <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的 <span class="title">Eloquent</span> 模型类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">model</span> <span class="title">User</span></span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">model</span> <span class="title">Models</span>/<span class="title">User</span></span></span><br><span class="line"><span class="class">// 新建一个消息通知类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">notification</span> <span class="title">TopicRepliedNotification</span></span></span><br><span class="line"><span class="class">// 新建一个模型观察者类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">observer</span> <span class="title">UserObserver</span></span></span><br><span class="line"><span class="class">// 创建授权策略</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">policy</span> <span class="title">PostPolicy</span></span></span><br><span class="line"><span class="class">// 创建一个新的服务提供者类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">provider</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个新的表单请求类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">request</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建一个 <span class="title">API</span> 资源类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">resource</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 新建验证规则类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">rule</span> <span class="title">name</span></span></span><br><span class="line"><span class="class">// 创建模型脚手架</span></span><br><span class="line"><span class="class">// &lt;<span class="title">name</span>&gt; 模型名称，如 <span class="title">Post</span></span></span><br><span class="line"><span class="class">// -<span class="title">s</span>, --<span class="title">schema</span>=<span class="title">SCHEMA</span> 表结构如：--<span class="title">schema</span>=&quot;<span class="title">title</span>:<span class="title">string</span>&quot;</span></span><br><span class="line"><span class="class">// -<span class="title">a</span>, --<span class="title">validator</span>[=<span class="title">VALIDATOR</span>] 表单验证，如：--<span class="title">validator</span>=&quot;<span class="title">title</span>:<span class="title">required</span>&quot;</span></span><br><span class="line"><span class="class">// -<span class="title">l</span>, --<span class="title">localization</span>[=<span class="title">LOCALIZATION</span>] 设置本地化信息，如：--<span class="title">localization</span>=&quot;<span class="title">key</span>:<span class="title">value</span>&quot;</span></span><br><span class="line"><span class="class">// -<span class="title">b</span>, --<span class="title">lang</span>[=<span class="title">LANG</span>] 设置本地化语言 --<span class="title">lang</span>=&quot;<span class="title">en</span>&quot;</span></span><br><span class="line"><span class="class">// -<span class="title">f</span>, --<span class="title">form</span>[=<span class="title">FORM</span>] 使用 <span class="title">Illumintate</span>/<span class="title">Html</span> <span class="title">Form</span> 来生成表单选项，默认为 <span class="title">false</span></span></span><br><span class="line"><span class="class">// -<span class="title">p</span>, --<span class="title">prefix</span>[=<span class="title">PREFIX</span>] 表结构前缀，默认 <span class="title">false</span></span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">scaffold</span>  [<span class="title">options</span>] [--] &lt;<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">// 生成数据填充类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">seeder</span></span></span><br><span class="line"><span class="class">// 生成测试类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">make</span>:<span class="title">test</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 数据库迁移</span></span><br><span class="line"><span class="class"> // --<span class="title">database</span>   指定数据库连接（下同）</span></span><br><span class="line"><span class="class"> // --<span class="title">force</span>      当处于生产环境时强制执行，不询问（下同）</span></span><br><span class="line"><span class="class"> // --<span class="title">path</span>       指定单独迁移文件地址</span></span><br><span class="line"><span class="class"> // --<span class="title">pretend</span>    把将要运行的 <span class="title">SQL</span> 语句打印出来（下同）</span></span><br><span class="line"><span class="class"> // --<span class="title">seed</span>       <span class="title">Seed</span> 任务是否需要被重新运行（下同）</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">migrate</span> [--<span class="title">database</span>[=&quot;...&quot;]] [--<span class="title">force</span>] [--<span class="title">path</span>[=&quot;...&quot;]] [--<span class="title">pretend</span>] [--<span class="title">seed</span>]</span></span><br><span class="line"><span class="class">// 创建迁移数据库表</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">migrate</span>:<span class="title">install</span> [--<span class="title">database</span>[=&quot;...&quot;]]</span></span><br><span class="line"><span class="class">// <span class="title">Drop</span> 所有数据表并重新运行 <span class="title">Migration</span></span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">migrate</span>:<span class="title">fresh</span></span></span><br><span class="line"><span class="class">// 重置并重新运行所有的 <span class="title">migrations</span></span></span><br><span class="line"><span class="class"> // --<span class="title">seeder</span>     指定主 <span class="title">Seeder</span> 的类名</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">migrate</span>:<span class="title">refresh</span> [--<span class="title">database</span>[=&quot;...&quot;]] [--<span class="title">force</span>] [--<span class="title">seed</span>] [--<span class="title">seeder</span>[=&quot;...&quot;]]</span></span><br><span class="line"><span class="class">// 回滚所有的数据库迁移</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">migrate</span>:<span class="title">reset</span> [--<span class="title">database</span>[=&quot;...&quot;]] [--<span class="title">force</span>] [--<span class="title">pretend</span>]</span></span><br><span class="line"><span class="class">// 回滚最最近一次运行的迁移任务</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">migrate</span>:<span class="title">rollback</span> [--<span class="title">database</span>[=&quot;...&quot;]] [--<span class="title">force</span>] [--<span class="title">pretend</span>]</span></span><br><span class="line"><span class="class">// <span class="title">migrations</span> 数据库表信息</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">migrate</span>:<span class="title">status</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 为数据库消息通知创建一个表迁移类</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">notifications</span>:<span class="title">table</span></span></span><br><span class="line"><span class="class">// 清除缓存的 <span class="title">bootstrap</span> 文件</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">optimize</span>:<span class="title">clear</span></span></span><br><span class="line"><span class="class">// 扩展包自动发现</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">package</span>:<span class="title">discover</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 为队列数据库表创建一个新的迁移</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">table</span></span></span><br><span class="line"><span class="class">// 监听指定的队列</span></span><br><span class="line"><span class="class"> // --<span class="title">queue</span>      被监听的队列</span></span><br><span class="line"><span class="class"> // --<span class="title">delay</span>      给执行失败的任务设置延时时间 (默认为零: 0)</span></span><br><span class="line"><span class="class"> // --<span class="title">memory</span>     内存限制大小，单位为 <span class="title">MB</span> (默认为: 128)</span></span><br><span class="line"><span class="class"> // --<span class="title">timeout</span>    指定任务运行超时秒数 (默认为: 60)</span></span><br><span class="line"><span class="class"> // --<span class="title">sleep</span>      等待检查队列任务的秒数 (默认为: 3)</span></span><br><span class="line"><span class="class"> // --<span class="title">tries</span>      任务记录失败重试次数 (默认为: 0)</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">listen</span> [--<span class="title">queue</span>[=&quot;...&quot;]] [--<span class="title">delay</span>[=&quot;...&quot;]] [--<span class="title">memory</span>[=&quot;...&quot;]] [--<span class="title">timeout</span>[=&quot;...&quot;]] [--<span class="title">sleep</span>[=&quot;...&quot;]] [--<span class="title">tries</span>[=&quot;...&quot;]] [<span class="title">connection</span>]</span></span><br><span class="line"><span class="class">// 查看所有执行失败的队列任务</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">failed</span></span></span><br><span class="line"><span class="class">// 为执行失败的数据表任务创建一个迁移</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">failed</span>-<span class="title">table</span></span></span><br><span class="line"><span class="class">// 清除所有执行失败的队列任务</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">flush</span></span></span><br><span class="line"><span class="class">// 删除一个执行失败的队列任务</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">forget</span></span></span><br><span class="line"><span class="class">// 在当前的队列任务执行完毕后, 重启队列的守护进程</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">restart</span></span></span><br><span class="line"><span class="class">// 对指定 <span class="title">id</span> 的执行失败的队列任务进行重试(<span class="title">id</span>: 失败队列任务的 <span class="title">ID</span>)</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">retry</span> <span class="title">id</span></span></span><br><span class="line"><span class="class">// 指定订阅 <span class="title">Iron</span>.<span class="title">io</span> 队列的链接</span></span><br><span class="line"><span class="class"> // <span class="title">queue</span>: <span class="title">Iron</span>.<span class="title">io</span> 的队列名称.</span></span><br><span class="line"><span class="class"> // <span class="title">url</span>: 将被订阅的 <span class="title">URL</span>.</span></span><br><span class="line"><span class="class"> // --<span class="title">type</span>       指定队列的推送类型.</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">subscribe</span> [--<span class="title">type</span>[=&quot;...&quot;]] <span class="title">queue</span> <span class="title">url</span></span></span><br><span class="line"><span class="class">// 处理下一个队列任务</span></span><br><span class="line"><span class="class"> // --<span class="title">queue</span>      被监听的队列</span></span><br><span class="line"><span class="class"> // --<span class="title">daemon</span>     在后台模式运行</span></span><br><span class="line"><span class="class"> // --<span class="title">delay</span>      给执行失败的任务设置延时时间 (默认为零: 0)</span></span><br><span class="line"><span class="class"> // --<span class="title">force</span>      强制在「维护模式下」运行</span></span><br><span class="line"><span class="class"> // --<span class="title">memory</span>     内存限制大小，单位为 <span class="title">MB</span> (默认为: 128)</span></span><br><span class="line"><span class="class"> // --<span class="title">sleep</span>      当没有任务处于有效状态时, 设置其进入休眠的秒数 (默认为: 3)</span></span><br><span class="line"><span class="class"> // --<span class="title">tries</span>      任务记录失败重试次数 (默认为: 0)</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">queue</span>:<span class="title">work</span> [--<span class="title">queue</span>[=&quot;...&quot;]] [--<span class="title">daemon</span>] [--<span class="title">delay</span>[=&quot;...&quot;]] [--<span class="title">force</span>] [--<span class="title">memory</span>[=&quot;...&quot;]] [--<span class="title">sleep</span>[=&quot;...&quot;]] [--<span class="title">tries</span>[=&quot;...&quot;]] [<span class="title">connection</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 生成路由缓存文件来提升路由效率</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">route</span>:<span class="title">cache</span></span></span><br><span class="line"><span class="class">// 移除路由缓存文件</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">route</span>:<span class="title">clear</span></span></span><br><span class="line"><span class="class">// 显示已注册过的路由</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">route</span>:<span class="title">list</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 运行计划命令</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">schedule</span>:<span class="title">run</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 为 <span class="title">session</span> 数据表生成迁移文件</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">session</span>:<span class="title">table</span></span></span><br><span class="line"><span class="class">// 创建 &quot;<span class="title">public</span>/<span class="title">storage</span>&quot; 到 &quot;<span class="title">storage</span>/<span class="title">app</span>/<span class="title">public</span>&quot; 的软链接</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">storage</span>:<span class="title">link</span></span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 从 <span class="title">vendor</span> 的扩展包中发布任何可发布的资源</span></span><br><span class="line"><span class="class"> // --<span class="title">force</span>        重写所有已存在的文件</span></span><br><span class="line"><span class="class"> // --<span class="title">provider</span>     指定你想要发布资源文件的服务提供者</span></span><br><span class="line"><span class="class"> // --<span class="title">tag</span>          指定你想要发布标记资源.</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">vendor</span>:<span class="title">publish</span> [--<span class="title">force</span>] [--<span class="title">provider</span>[=&quot;...&quot;]] [--<span class="title">tag</span>[=&quot;...&quot;]]</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">tail</span> [--<span class="title">path</span>[=&quot;...&quot;]] [--<span class="title">lines</span>[=&quot;...&quot;]] [<span class="title">connection</span>]</span></span><br><span class="line"><span class="class"></span></span><br><span class="line"><span class="class">// 缓存视图文件以提高效率</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">view</span>:<span class="title">cache</span></span></span><br><span class="line"><span class="class">// 清除视图文件缓存</span></span><br><span class="line"><span class="class"><span class="title">php</span> <span class="title">artisan</span> <span class="title">view</span>:<span class="title">clear</span></span></span><br></pre></td></tr></table></figure>

<h2 id="Container"><a href="#Container" class="headerlink" title="Container"></a>Container</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">App::bind(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$app</span></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> Foo; &#125;);</span><br><span class="line">App::make(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"><span class="comment">// 如果存在此类, 则返回</span></span><br><span class="line">App::make(<span class="string">&#x27;FooBar&#x27;</span>);</span><br><span class="line"><span class="comment">// 单例模式实例到服务容器中</span></span><br><span class="line">App::singleton(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="keyword">new</span> Foo; &#125;);</span><br><span class="line"><span class="comment">// 将已实例化的对象注册到服务容器中</span></span><br><span class="line">App::instance(<span class="string">&#x27;foo&#x27;</span>, <span class="keyword">new</span> Foo);</span><br><span class="line"><span class="comment">// 注册绑定规则到服务容器中</span></span><br><span class="line">App::bind(<span class="string">&#x27;FooRepositoryInterface&#x27;</span>, <span class="string">&#x27;BarRepository&#x27;</span>);</span><br><span class="line"><span class="comment">// 绑定基本值</span></span><br><span class="line">App::when(<span class="string">&#x27;App\Http\Controllers\UserController&#x27;</span>)-&gt;needs(<span class="string">&#x27;$variableName&#x27;</span>)-&gt;give(<span class="variable">$value</span>);</span><br><span class="line"><span class="comment">// 标记</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;app-&gt;tag([<span class="string">&#x27;SpeedReport&#x27;</span>,  <span class="string">&#x27;MemoryReport&#x27;</span>],  <span class="string">&#x27;reports&#x27;</span>);</span><br><span class="line"><span class="comment">// 给应用注册一个服务提供者</span></span><br><span class="line">App::register(<span class="string">&#x27;FooServiceProvider&#x27;</span>);</span><br><span class="line"><span class="comment">// 监听容器对某个对象的解析</span></span><br><span class="line">App::resolving(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$object</span></span>)</span>&#123;&#125;);</span><br><span class="line">resolve(<span class="string">&#x27;HelpSpot\API&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Environment"><a href="#Environment" class="headerlink" title="Environment"></a>Environment</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$environment</span> = app()-&gt;environment();</span><br><span class="line"><span class="variable">$environment</span> = App::environment();</span><br><span class="line"><span class="comment">// 判断当环境是否为 local</span></span><br><span class="line"><span class="keyword">if</span> (app()-&gt;environment(<span class="string">&#x27;local&#x27;</span>))&#123;&#125;</span><br><span class="line"><span class="comment">// 判断当环境是否为 local 或 staging...</span></span><br><span class="line"><span class="keyword">if</span> (app()-&gt;environment([<span class="string">&#x27;local&#x27;</span>, <span class="string">&#x27;staging&#x27;</span>]))&#123;&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// config/app.php 里的 timezone 配置项</span></span><br><span class="line">Config::get(<span class="string">&#x27;app.timezone&#x27;</span>)</span><br><span class="line">Config::get(<span class="string">&#x27;app.timezone&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line">Config::set(<span class="string">&#x27;database.default&#x27;</span>, <span class="string">&#x27;sqlite&#x27;</span>);</span><br><span class="line"><span class="comment">// config() 等同于 Config Facade</span></span><br><span class="line">config()-&gt;get(<span class="string">&#x27;app.timezone&#x27;</span>);</span><br><span class="line">config(<span class="string">&#x27;app.timezone&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);   <span class="comment">// get</span></span><br><span class="line">config([<span class="string">&#x27;database.default&#x27;</span> =&gt; <span class="string">&#x27;sqlite&#x27;</span>]); <span class="comment">// set</span></span><br></pre></td></tr></table></figure>

<h2 id="Lang"><a href="#Lang" class="headerlink" title="Lang"></a>Lang</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">App::setLocale(<span class="string">&#x27;en&#x27;</span>);</span><br><span class="line">Lang::get(<span class="string">&#x27;messages.welcome&#x27;</span>);</span><br><span class="line">Lang::get(<span class="string">&#x27;messages.welcome&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="string">&#x27;Bar&#x27;</span>));</span><br><span class="line">Lang::has(<span class="string">&#x27;messages.welcome&#x27;</span>);</span><br><span class="line">Lang::choice(<span class="string">&#x27;messages.apples&#x27;</span>, <span class="number">10</span>);</span><br><span class="line"><span class="comment">// Lang::get 的别名</span></span><br><span class="line">trans(<span class="string">&#x27;messages.welcome&#x27;</span>);</span><br><span class="line"><span class="comment">// Lang::choice 的别名</span></span><br><span class="line">trans_choice(<span class="string">&#x27;messages.apples&#x27;</span>,  <span class="number">10</span>)</span><br><span class="line"><span class="comment">// 辅助函数</span></span><br><span class="line">__(<span class="string">&#x27;messages.welcome&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Log"><a href="#Log" class="headerlink" title="Log"></a>Log</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 记录器提供了 7 种在 RFC 5424 标准内定义的记录等级:</span></span><br><span class="line"><span class="comment">// debug, info, notice, warning, error, critical, and alert.</span></span><br><span class="line">Log::info(<span class="string">&#x27;info&#x27;</span>);</span><br><span class="line">Log::info(<span class="string">&#x27;info&#x27;</span>,<span class="keyword">array</span>(<span class="string">&#x27;context&#x27;</span>=&gt;<span class="string">&#x27;additional info&#x27;</span>));</span><br><span class="line">Log::error(<span class="string">&#x27;error&#x27;</span>);</span><br><span class="line">Log::warning(<span class="string">&#x27;warning&#x27;</span>);</span><br><span class="line"><span class="comment">// 获取 monolog 实例</span></span><br><span class="line">Log::getMonolog();</span><br><span class="line"><span class="comment">// 添加监听器</span></span><br><span class="line">Log::listen(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$level</span>, <span class="variable">$message</span>, <span class="variable">$context</span></span>) </span>&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="记录-SQL-查询语句"><a href="#记录-SQL-查询语句" class="headerlink" title="记录 SQL 查询语句"></a>记录 SQL 查询语句</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 开启 log</span></span><br><span class="line">DB::connection()-&gt;enableQueryLog();</span><br><span class="line"><span class="comment">// 获取已执行的查询数组</span></span><br><span class="line">DB::getQueryLog();</span><br></pre></td></tr></table></figure>

<h2 id="File"><a href="#File" class="headerlink" title="File"></a>File</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">File::exists(<span class="variable">$path</span>);</span><br><span class="line">File::get(<span class="variable">$path</span>, <span class="variable">$lock</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 加锁读取文件内容</span></span><br><span class="line">File::sharedGet(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 获取文件内容，不存在会抛出 FileNotFoundException 异常</span></span><br><span class="line">File::getRequire(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 获取文件内容, 仅能引入一次</span></span><br><span class="line">File::requireOnce(<span class="variable">$file</span>);</span><br><span class="line"><span class="comment">// 生成文件路径的 MD5 哈希</span></span><br><span class="line">File::hash(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 将内容写入文件</span></span><br><span class="line">File::put(<span class="variable">$path</span>, <span class="variable">$contents</span>, <span class="variable">$lock</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 写入文件，存在的话覆盖写入</span></span><br><span class="line">File::replace(<span class="variable">$path</span>, <span class="variable">$content</span>);</span><br><span class="line"><span class="comment">// 将内容添加在文件原内容前面</span></span><br><span class="line">File::prepend(<span class="variable">$path</span>, <span class="variable">$data</span>);</span><br><span class="line"><span class="comment">// 将内容添加在文件原内容后</span></span><br><span class="line">File::append(<span class="variable">$path</span>, <span class="variable">$data</span>);</span><br><span class="line"><span class="comment">// 修改路径权限</span></span><br><span class="line">File::chmod(<span class="variable">$path</span>, <span class="variable">$mode</span> = <span class="literal">null</span>);</span><br><span class="line"><span class="comment">// 通过给定的路径来删除文件</span></span><br><span class="line">File::delete(<span class="variable">$paths</span>);</span><br><span class="line"><span class="comment">// 将文件移动到新目录下</span></span><br><span class="line">File::move(<span class="variable">$path</span>, <span class="variable">$target</span>);</span><br><span class="line"><span class="comment">// 将文件复制到新目录下</span></span><br><span class="line">File::copy(<span class="variable">$path</span>, <span class="variable">$target</span>);</span><br><span class="line"><span class="comment">// 创建硬连接</span></span><br><span class="line">File::link(<span class="variable">$target</span>, <span class="variable">$link</span>);</span><br><span class="line"><span class="comment">// 从文件路径中提取文件名，不包含后缀</span></span><br><span class="line">File::name(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 从文件路径中提取文件名，包含后缀</span></span><br><span class="line">File::basename(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 获取文件路径名称</span></span><br><span class="line">File::dirname(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 从文件的路径地址提取文件的扩展</span></span><br><span class="line">File::extension(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 获取文件类型</span></span><br><span class="line">File::type(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 获取文件 MIME 类型</span></span><br><span class="line">File::mimeType(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 获取文件大小</span></span><br><span class="line">File::size(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 获取文件的最后修改时间</span></span><br><span class="line">File::lastModified(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 判断给定的路径是否是文件目录</span></span><br><span class="line">File::isDirectory(<span class="variable">$directory</span>);</span><br><span class="line"><span class="comment">// 判断给定的路径是否是可读取</span></span><br><span class="line">File::isReadable(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 判断给定的路径是否是可写入的</span></span><br><span class="line">File::isWritable(<span class="variable">$path</span>);</span><br><span class="line"><span class="comment">// 判断给定的路径是否是文件</span></span><br><span class="line">File::isFile(<span class="variable">$file</span>);</span><br><span class="line"><span class="comment">// 查找能被匹配到的路径名</span></span><br><span class="line">File::glob(<span class="variable">$pattern</span>, <span class="variable">$flags</span> = <span class="number">0</span>);</span><br><span class="line"><span class="comment">// 获取一个目录下的所有文件, 以数组类型返回</span></span><br><span class="line">File::files(<span class="variable">$directory</span>, <span class="variable">$hidden</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 获取一个目录下的所有文件 (递归).</span></span><br><span class="line">File::allFiles(<span class="variable">$directory</span>, <span class="variable">$hidden</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 获取一个目录内的目录</span></span><br><span class="line">File::directories(<span class="variable">$directory</span>);</span><br><span class="line"><span class="comment">// 创建一个目录</span></span><br><span class="line">File::makeDirectory(<span class="variable">$path</span>, <span class="variable">$mode</span> = <span class="number">0755</span>, <span class="variable">$recursive</span> = <span class="literal">false</span>, <span class="variable">$force</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 移动目录</span></span><br><span class="line">File::moveDirectory(<span class="variable">$from</span>, <span class="variable">$to</span>, <span class="variable">$overwrite</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 将文件夹从一个目录复制到另一个目录下</span></span><br><span class="line">File::copyDirectory(<span class="variable">$directory</span>, <span class="variable">$destination</span>, <span class="variable">$options</span> = <span class="literal">null</span>);</span><br><span class="line"><span class="comment">// 删除目录</span></span><br><span class="line">File::deleteDirectory(<span class="variable">$directory</span>, <span class="variable">$preserve</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 递归式删除目录</span></span><br><span class="line">File::deleteDirectories(<span class="variable">$directory</span>);</span><br><span class="line"><span class="comment">// 清空指定目录的所有文件和文件夹</span></span><br><span class="line">File::cleanDirectory(<span class="variable">$directory</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Storage"><a href="#Storage" class="headerlink" title="Storage"></a>Storage</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 写入文件</span></span><br><span class="line">Storage::put(<span class="string">&#x27;avatars/1&#x27;</span>, <span class="variable">$fileContents</span>);</span><br><span class="line"><span class="comment">// 指定磁盘</span></span><br><span class="line">Storage::disk(<span class="string">&#x27;local&#x27;</span>)-&gt;put(<span class="string">&#x27;file.txt&#x27;</span>, <span class="string">&#x27;Contents&#x27;</span>);</span><br><span class="line">Storage::get(<span class="string">&#x27;file.jpg&#x27;</span>);</span><br><span class="line">Storage::exists(<span class="string">&#x27;file.jpg&#x27;</span>);</span><br><span class="line">Storage::download(<span class="string">&#x27;file.jpg&#x27;</span>,  <span class="variable">$name</span>,  <span class="variable">$headers</span>);</span><br><span class="line">Storage::url(<span class="string">&#x27;file.jpg&#x27;</span>);</span><br><span class="line">Storage::temporaryUrl(<span class="string">&#x27;file.jpg&#x27;</span>, now()-&gt;addMinutes(<span class="number">5</span>));</span><br><span class="line">Storage::size(<span class="string">&#x27;file.jpg&#x27;</span>);</span><br><span class="line">Storage::lastModified(<span class="string">&#x27;file.jpg&#x27;</span>);</span><br><span class="line"><span class="comment">// 自动为文件名生成唯一的ID...  </span></span><br><span class="line">Storage::putFile(<span class="string">&#x27;photos&#x27;</span>,  <span class="keyword">new</span>  File(<span class="string">&#x27;/path/to/photo&#x27;</span>));</span><br><span class="line"><span class="comment">// 手动指定文件名...  </span></span><br><span class="line">Storage::putFileAs(<span class="string">&#x27;photos&#x27;</span>, <span class="keyword">new</span>  File(<span class="string">&#x27;/path/to/photo&#x27;</span>), <span class="string">&#x27;photo.jpg&#x27;</span>);</span><br><span class="line">Storage::prepend(<span class="string">&#x27;file.log&#x27;</span>, <span class="string">&#x27;Prepended Text&#x27;</span>);</span><br><span class="line">Storage::append(<span class="string">&#x27;file.log&#x27;</span>, <span class="string">&#x27;Appended Text&#x27;</span>);</span><br><span class="line">Storage::copy(<span class="string">&#x27;old/file.jpg&#x27;</span>, <span class="string">&#x27;new/file.jpg&#x27;</span>);</span><br><span class="line">Storage::move(<span class="string">&#x27;old/file.jpg&#x27;</span>, <span class="string">&#x27;new/file.jpg&#x27;</span>);</span><br><span class="line">Storage::putFileAs(<span class="string">&#x27;avatars&#x27;</span>, <span class="variable">$request</span>-&gt;file(<span class="string">&#x27;avatar&#x27;</span>), Auth::id());</span><br><span class="line"><span class="comment">// 「可见性」是对多个平台的文件权限的抽象</span></span><br><span class="line">Storage::getVisibility(<span class="string">&#x27;file.jpg&#x27;</span>);</span><br><span class="line">Storage::setVisibility(<span class="string">&#x27;file.jpg&#x27;</span>,  <span class="string">&#x27;public&#x27;</span>)</span><br><span class="line">Storage::delete(<span class="string">&#x27;file.jpg&#x27;</span>);</span><br><span class="line">Storage::delete([<span class="string">&#x27;file.jpg&#x27;</span>,  <span class="string">&#x27;file2.jpg&#x27;</span>]);</span><br><span class="line"><span class="comment">// 获取目录下的所有的文件</span></span><br><span class="line">Storage::files(<span class="variable">$directory</span>);</span><br><span class="line">Storage::allFiles(<span class="variable">$directory</span>);</span><br><span class="line"><span class="comment">// 获取目录下的所有目录</span></span><br><span class="line">Storage::directories(<span class="variable">$directory</span>);</span><br><span class="line">Storage::allDirectories(<span class="variable">$directory</span>);</span><br><span class="line"><span class="comment">// 创建目录</span></span><br><span class="line">Storage::makeDirectory(<span class="variable">$directory</span>);</span><br><span class="line"><span class="comment">// 删除目录</span></span><br><span class="line">Storage::deleteDirectory(<span class="variable">$directory</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Schema"><a href="#Schema" class="headerlink" title="Schema"></a>Schema</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建指定数据表</span></span><br><span class="line"> Schema::create(<span class="string">&#x27;table&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$table</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">  <span class="variable">$table</span>-&gt;increments(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 指定一个连接</span></span><br><span class="line"> Schema::connection(<span class="string">&#x27;foo&#x27;</span>)-&gt;create(<span class="string">&#x27;table&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$table</span></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 通过给定的名称来重命名数据表</span></span><br><span class="line"> Schema::rename(<span class="variable">$from</span>, <span class="variable">$to</span>);</span><br><span class="line"><span class="comment">// 移除指定数据表</span></span><br><span class="line"> Schema::drop(<span class="string">&#x27;table&#x27;</span>);</span><br><span class="line"><span class="comment">// 当数据表存在时, 将指定数据表移除</span></span><br><span class="line"> Schema::dropIfExists(<span class="string">&#x27;table&#x27;</span>);</span><br><span class="line"><span class="comment">// 判断数据表是否存在</span></span><br><span class="line"> Schema::hasTable(<span class="string">&#x27;table&#x27;</span>);</span><br><span class="line"><span class="comment">// 判断数据表是否有该列</span></span><br><span class="line"> Schema::hasColumn(<span class="string">&#x27;table&#x27;</span>, <span class="string">&#x27;column&#x27;</span>);</span><br><span class="line"><span class="comment">// 更新一个已存在的数据表</span></span><br><span class="line"> Schema::table(<span class="string">&#x27;table&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$table</span></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 重命名数据表的列</span></span><br><span class="line"><span class="variable">$table</span>-&gt;renameColumn(<span class="string">&#x27;from&#x27;</span>, <span class="string">&#x27;to&#x27;</span>);</span><br><span class="line"><span class="comment">// 移除指定的数据表列</span></span><br><span class="line"><span class="variable">$table</span>-&gt;dropColumn(<span class="keyword">string</span>|<span class="keyword">array</span>);</span><br><span class="line"><span class="comment">// 指定数据表使用的存储引擎</span></span><br><span class="line"><span class="variable">$table</span>-&gt;engine = <span class="string">&#x27;InnoDB&#x27;</span>;</span><br><span class="line"><span class="comment">// 字段顺序，只能在 MySQL 中才能用</span></span><br><span class="line"><span class="variable">$table</span>-&gt;string(<span class="string">&#x27;name&#x27;</span>)-&gt;after(<span class="string">&#x27;email&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$table</span>-&gt;string(<span class="string">&#x27;column&#x27;</span>)-&gt;unique();</span><br><span class="line"><span class="variable">$table</span>-&gt;primary(<span class="string">&#x27;column&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建一个双主键</span></span><br><span class="line"><span class="variable">$table</span>-&gt;primary(<span class="keyword">array</span>(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;last&#x27;</span>));</span><br><span class="line"><span class="variable">$table</span>-&gt;unique(<span class="string">&#x27;column&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;unique(<span class="string">&#x27;column&#x27;</span>, <span class="string">&#x27;key_name&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建一个双唯一性索引</span></span><br><span class="line"><span class="variable">$table</span>-&gt;unique(<span class="keyword">array</span>(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;last&#x27;</span>));</span><br><span class="line"><span class="variable">$table</span>-&gt;unique(<span class="keyword">array</span>(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;last&#x27;</span>), <span class="string">&#x27;key_name&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;index(<span class="string">&#x27;column&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;index(<span class="string">&#x27;column&#x27;</span>, <span class="string">&#x27;key_name&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建一个双索引</span></span><br><span class="line"><span class="variable">$table</span>-&gt;index(<span class="keyword">array</span>(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;last&#x27;</span>));</span><br><span class="line"><span class="variable">$table</span>-&gt;index(<span class="keyword">array</span>(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;last&#x27;</span>), <span class="string">&#x27;key_name&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;dropPrimary(<span class="keyword">array</span>(<span class="string">&#x27;column&#x27;</span>));</span><br><span class="line"><span class="variable">$table</span>-&gt;dropPrimary(<span class="string">&#x27;table_column_primary&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;dropUnique(<span class="keyword">array</span>(<span class="string">&#x27;column&#x27;</span>));</span><br><span class="line"><span class="variable">$table</span>-&gt;dropUnique(<span class="string">&#x27;table_column_unique&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;dropIndex(<span class="keyword">array</span>(<span class="string">&#x27;column&#x27;</span>));</span><br><span class="line"><span class="variable">$table</span>-&gt;dropIndex(<span class="string">&#x27;table_column_index&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="外键"><a href="#外键" class="headerlink" title="外键"></a>外键</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$table</span>-&gt;foreign(<span class="string">&#x27;user_id&#x27;</span>)-&gt;references(<span class="string">&#x27;id&#x27;</span>)-&gt;on(<span class="string">&#x27;users&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;foreign(<span class="string">&#x27;user_id&#x27;</span>)-&gt;references(<span class="string">&#x27;id&#x27;</span>)-&gt;on(<span class="string">&#x27;users&#x27;</span>)-&gt;onDelete(<span class="string">&#x27;cascade&#x27;</span>|<span class="string">&#x27;restrict&#x27;</span>|<span class="string">&#x27;set null&#x27;</span>|<span class="string">&#x27;no action&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;foreign(<span class="string">&#x27;user_id&#x27;</span>)-&gt;references(<span class="string">&#x27;id&#x27;</span>)-&gt;on(<span class="string">&#x27;users&#x27;</span>)-&gt;onUpdate(<span class="string">&#x27;cascade&#x27;</span>|<span class="string">&#x27;restrict&#x27;</span>|<span class="string">&#x27;set null&#x27;</span>|<span class="string">&#x27;no action&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;dropForeign(<span class="keyword">array</span>(<span class="string">&#x27;user_id&#x27;</span>));</span><br><span class="line"><span class="variable">$table</span>-&gt;dropForeign(<span class="string">&#x27;posts_user_id_foreign&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="字段类型"><a href="#字段类型" class="headerlink" title="字段类型"></a>字段类型</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自增</span></span><br><span class="line"><span class="variable">$table</span>-&gt;increments(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;bigIncrements(<span class="string">&#x27;id&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数字</span></span><br><span class="line"><span class="variable">$table</span>-&gt;integer(<span class="string">&#x27;votes&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;tinyInteger(<span class="string">&#x27;votes&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;smallInteger(<span class="string">&#x27;votes&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;mediumInteger(<span class="string">&#x27;votes&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;bigInteger(<span class="string">&#x27;votes&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;float(<span class="string">&#x27;amount&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;double(<span class="string">&#x27;column&#x27;</span>, <span class="number">15</span>, <span class="number">8</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;decimal(<span class="string">&#x27;amount&#x27;</span>, <span class="number">5</span>, <span class="number">2</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 字符串和文本</span></span><br><span class="line"><span class="variable">$table</span>-&gt;char(<span class="string">&#x27;name&#x27;</span>, <span class="number">4</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;string(<span class="string">&#x27;email&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;string(<span class="string">&#x27;name&#x27;</span>, <span class="number">100</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;text(<span class="string">&#x27;description&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;mediumText(<span class="string">&#x27;description&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;longText(<span class="string">&#x27;description&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 日期和时间</span></span><br><span class="line"><span class="variable">$table</span>-&gt;date(<span class="string">&#x27;created_at&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;dateTime(<span class="string">&#x27;created_at&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;time(<span class="string">&#x27;sunrise&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;timestamp(<span class="string">&#x27;added_on&#x27;</span>);</span><br><span class="line"><span class="comment">// Adds created_at and updated_at columns</span></span><br><span class="line"> <span class="comment">// 添加 created_at 和 updated_at 行</span></span><br><span class="line"><span class="variable">$table</span>-&gt;timestamps();</span><br><span class="line"><span class="variable">$table</span>-&gt;nullableTimestamps();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 其它类型</span></span><br><span class="line"><span class="variable">$table</span>-&gt;binary(<span class="string">&#x27;data&#x27;</span>);</span><br><span class="line"><span class="variable">$table</span>-&gt;boolean(<span class="string">&#x27;confirmed&#x27;</span>);</span><br><span class="line"><span class="comment">// 为软删除添加 deleted_at 字段</span></span><br><span class="line"><span class="variable">$table</span>-&gt;softDeletes();</span><br><span class="line"><span class="variable">$table</span>-&gt;enum(<span class="string">&#x27;choices&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>));</span><br><span class="line"><span class="comment">// 添加 remember_token 为 VARCHAR(100) NULL</span></span><br><span class="line"><span class="variable">$table</span>-&gt;rememberToken();</span><br><span class="line"><span class="comment">// 添加整型的 parent_id 和字符串类型的 parent_type</span></span><br><span class="line"><span class="variable">$table</span>-&gt;morphs(<span class="string">&#x27;parent&#x27;</span>);</span><br><span class="line">-&gt;nullable()</span><br><span class="line">-&gt;default(<span class="variable">$value</span>)</span><br><span class="line">-&gt;unsigned()</span><br><span class="line">-&gt;comment()</span><br></pre></td></tr></table></figure>

<h2 id="Route"><a href="#Route" class="headerlink" title="Route"></a>Route</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">Route::get(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;ControllerName@function&#x27;</span>);</span><br><span class="line">Route::controller(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;FooController&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="资源路由"><a href="#资源路由" class="headerlink" title="资源路由"></a>资源路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Route::resource(<span class="string">&#x27;posts&#x27;</span>,<span class="string">&#x27;PostsController&#x27;</span>);</span><br><span class="line"><span class="comment">// 资源路由器只允许指定动作通过</span></span><br><span class="line">Route::resource(<span class="string">&#x27;photo&#x27;</span>, <span class="string">&#x27;PhotoController&#x27;</span>,[<span class="string">&#x27;only&#x27;</span> =&gt; [<span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;show&#x27;</span>]]);</span><br><span class="line">Route::resource(<span class="string">&#x27;photo&#x27;</span>, <span class="string">&#x27;PhotoController&#x27;</span>,[<span class="string">&#x27;except&#x27;</span> =&gt; [<span class="string">&#x27;update&#x27;</span>, <span class="string">&#x27;destroy&#x27;</span>]]);</span><br><span class="line"><span class="comment">// 批量注册资源路由</span></span><br><span class="line">Route::resources([<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="string">&#x27;FooController&#x27;</span>, <span class="string">&#x27;bar&#x27;</span> =&gt; <span class="string">&#x27;BarController&#x27;</span>])</span><br><span class="line">Route::resources([<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="string">&#x27;FooController&#x27;</span>, <span class="string">&#x27;bar&#x27;</span> =&gt; <span class="string">&#x27;BarController&#x27;</span>], [<span class="string">&#x27;only&#x27;</span> =&gt; [<span class="string">&#x27;index&#x27;</span>, <span class="string">&#x27;show&#x27;</span>]])</span><br><span class="line">Route::resources([<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="string">&#x27;FooController&#x27;</span>, <span class="string">&#x27;bar&#x27;</span> =&gt; <span class="string">&#x27;BarController&#x27;</span>], [<span class="string">&#x27;except&#x27;</span> =&gt; [<span class="string">&#x27;update&#x27;</span>, <span class="string">&#x27;destroy&#x27;</span>]])</span><br></pre></td></tr></table></figure>

<h3 id="触发错误"><a href="#触发错误" class="headerlink" title="触发错误"></a>触发错误</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">App::abort(<span class="number">404</span>);</span><br><span class="line"><span class="variable">$handler</span>-&gt;missing(...) in ErrorServiceProvider::boot();</span><br><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> NotFoundHttpException;</span><br></pre></td></tr></table></figure>

<h3 id="路由参数"><a href="#路由参数" class="headerlink" title="路由参数"></a>路由参数</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;foo/&#123;bar&#125;&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$bar</span></span>)</span>&#123;&#125;);</span><br><span class="line">Route::get(<span class="string">&#x27;foo/&#123;bar?&#125;&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$bar</span> = <span class="string">&#x27;bar&#x27;</span></span>)</span>&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="HTTP-请求方式"><a href="#HTTP-请求方式" class="headerlink" title="HTTP 请求方式"></a>HTTP 请求方式</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Route::any(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">Route::post(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">Route::put(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">Route::patch(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line">Route::delete(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// RESTful 资源控制器</span></span><br><span class="line">Route::resource(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;FooController&#x27;</span>);</span><br><span class="line"><span class="comment">// 为一个路由注册多种请求方式</span></span><br><span class="line">Route::match([<span class="string">&#x27;get&#x27;</span>, <span class="string">&#x27;post&#x27;</span>], <span class="string">&#x27;/&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="安全路由-TBD"><a href="#安全路由-TBD" class="headerlink" title="安全路由 (TBD)"></a>安全路由 (TBD)</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;foo&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;https&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;));</span><br></pre></td></tr></table></figure>

<h3 id="路由约束"><a href="#路由约束" class="headerlink" title="路由约束"></a>路由约束</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Route::get(<span class="string">&#x27;foo/&#123;bar&#125;&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$bar</span></span>)</span>&#123;&#125;)</span><br><span class="line">        -&gt;where(<span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;[0-9]+&#x27;</span>);</span><br><span class="line">Route::get(<span class="string">&#x27;foo/&#123;bar&#125;/&#123;baz&#125;&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$bar</span>, <span class="variable">$baz</span></span>)</span>&#123;&#125;)</span><br><span class="line">        -&gt;where(<span class="keyword">array</span>(<span class="string">&#x27;bar&#x27;</span> =&gt; <span class="string">&#x27;[0-9]+&#x27;</span>, <span class="string">&#x27;baz&#x27;</span> =&gt; <span class="string">&#x27;[A-Za-z]&#x27;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// 设置一个可跨路由使用的模式</span></span><br><span class="line"> Route::pattern(<span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;[0-9]+&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="HTTP-中间件"><a href="#HTTP-中间件" class="headerlink" title="HTTP 中间件"></a>HTTP 中间件</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为路由指定 Middleware</span></span><br><span class="line">Route::get(<span class="string">&#x27;admin/profile&#x27;</span>, [<span class="string">&#x27;middleware&#x27;</span> =&gt; <span class="string">&#x27;auth&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;]);</span><br><span class="line">Route::get(<span class="string">&#x27;admin/profile&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)-&gt;middleware(<span class="string">&#x27;auth&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="命名路由"><a href="#命名路由" class="headerlink" title="命名路由"></a>命名路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Route::currentRouteName();</span><br><span class="line">Route::get(<span class="string">&#x27;foo/bar&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;as&#x27;</span> =&gt; <span class="string">&#x27;foobar&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;));</span><br><span class="line">Route::get(<span class="string">&#x27;user/profile&#x27;</span>, [</span><br><span class="line">    <span class="string">&#x27;as&#x27;</span> =&gt; <span class="string">&#x27;profile&#x27;</span>, <span class="string">&#x27;uses&#x27;</span> =&gt; <span class="string">&#x27;UserController@showProfile&#x27;</span></span><br><span class="line">]);</span><br><span class="line">Route::get(<span class="string">&#x27;user/profile&#x27;</span>, <span class="string">&#x27;UserController@showProfile&#x27;</span>)-&gt;name(<span class="string">&#x27;profile&#x27;</span>);</span><br><span class="line"><span class="variable">$url</span> = route(<span class="string">&#x27;profile&#x27;</span>);</span><br><span class="line"><span class="variable">$redirect</span> = redirect()-&gt;route(<span class="string">&#x27;profile&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="路由前缀"><a href="#路由前缀" class="headerlink" title="路由前缀"></a>路由前缀</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Route::group([<span class="string">&#x27;prefix&#x27;</span> =&gt; <span class="string">&#x27;admin&#x27;</span>], <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    Route::get(<span class="string">&#x27;users&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&#x27;Matches The &quot;/admin/users&quot; URL&#x27;</span>;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="路由命名空间"><a href="#路由命名空间" class="headerlink" title="路由命名空间"></a>路由命名空间</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此路由组将会传送 &#x27;Foo\Bar&#x27; 命名空间</span></span><br><span class="line">Route::group(<span class="keyword">array</span>(<span class="string">&#x27;namespace&#x27;</span> =&gt; <span class="string">&#x27;Foo\Bar&#x27;</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;)</span><br></pre></td></tr></table></figure>

<h3 id="子域名路由"><a href="#子域名路由" class="headerlink" title="子域名路由"></a>子域名路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// &#123;sub&#125; 将在闭包中被忽略</span></span><br><span class="line">Route::group(<span class="keyword">array</span>(<span class="string">&#x27;domain&#x27;</span> =&gt; <span class="string">&#x27;&#123;sub&#125;.example.com&#x27;</span>), <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="URL"><a href="#URL" class="headerlink" title="URL"></a>URL</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">URL::full();</span><br><span class="line">URL::current();</span><br><span class="line">URL::previous();</span><br><span class="line">URL::to(<span class="string">&#x27;foo/bar&#x27;</span>, <span class="variable">$parameters</span>, <span class="variable">$secure</span>);</span><br><span class="line">URL::action(<span class="string">&#x27;NewsController@item&#x27;</span>, [<span class="string">&#x27;id&#x27;</span>=&gt;<span class="number">123</span>]);</span><br><span class="line"><span class="comment">// 需要在适当的命名空间内</span></span><br><span class="line">URL::action(<span class="string">&#x27;Auth\AuthController@logout&#x27;</span>);</span><br><span class="line">URL::action(<span class="string">&#x27;FooController@method&#x27;</span>, <span class="variable">$parameters</span>, <span class="variable">$absolute</span>);</span><br><span class="line">URL::route(<span class="string">&#x27;foo&#x27;</span>, <span class="variable">$parameters</span>, <span class="variable">$absolute</span>);</span><br><span class="line">URL::secure(<span class="string">&#x27;foo/bar&#x27;</span>, <span class="variable">$parameters</span>);</span><br><span class="line">URL::asset(<span class="string">&#x27;css/foo.css&#x27;</span>, <span class="variable">$secure</span>);</span><br><span class="line">URL::secureAsset(<span class="string">&#x27;css/foo.css&#x27;</span>);</span><br><span class="line">URL::isValidUrl(<span class="string">&#x27;http://example.com&#x27;</span>);</span><br><span class="line">URL::getRequest();</span><br><span class="line">URL::setRequest(<span class="variable">$request</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Cookie"><a href="#Cookie" class="headerlink" title="Cookie"></a>Cookie</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 等于 Cookie</span></span><br><span class="line">cookie();</span><br><span class="line">request()-&gt;cookie(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">Cookie::get(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cookie::get(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建一个永久有效的 cookie</span></span><br><span class="line">Cookie::forever(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="comment">// 创建一个 N 分钟有效的 cookie</span></span><br><span class="line">Cookie::make(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, <span class="string">&#x27;minutes&#x27;</span>);</span><br><span class="line">cookie(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, <span class="string">&#x27;minutes&#x27;</span>);</span><br><span class="line"><span class="comment">// 在回应之前先积累 cookie，回应时统一返回</span></span><br><span class="line">Cookie::queue(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, <span class="string">&#x27;minutes&#x27;</span>);</span><br><span class="line"><span class="comment">// 移除 Cookie</span></span><br><span class="line">Cookie::forget(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 从 response 发送一个 cookie</span></span><br><span class="line"><span class="variable">$response</span> = Response::make(<span class="string">&#x27;Hello World&#x27;</span>);</span><br><span class="line"><span class="variable">$response</span>-&gt;withCookie(Cookie::make(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, <span class="variable">$minutes</span>));</span><br><span class="line"><span class="comment">// 设置未加密 Cookie app/Http/Middleware/EncryptCookies.php</span></span><br><span class="line">EncryptCookies-&gt;except = [<span class="string">&#x27;cookie_name_1&#x27;</span>];</span><br></pre></td></tr></table></figure>

<h2 id="Session"><a href="#Session" class="headerlink" title="Session"></a>Session</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Session::get(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 从会话中读取一个条目</span></span><br><span class="line"> Session::get(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line">Session::get(<span class="string">&#x27;key&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="string">&#x27;default&#x27;</span>; &#125;);</span><br><span class="line"><span class="comment">// 获取 session 的 ID</span></span><br><span class="line">Session::getId();</span><br><span class="line"><span class="comment">// 增加一个会话键值数据</span></span><br><span class="line">Session::put(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="comment">// 将一个值加入到 session 的数组中</span></span><br><span class="line">Session::push(<span class="string">&#x27;foo.bar&#x27;</span>,<span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="comment">// 返回 session 的所有条目</span></span><br><span class="line">Session::all();</span><br><span class="line"><span class="comment">// 检查 session 里是否有此条目</span></span><br><span class="line">Session::has(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 从 session 中移除一个条目</span></span><br><span class="line">Session::forget(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 从 session 中移除所有条目</span></span><br><span class="line">Session::flush();</span><br><span class="line"><span class="comment">// 生成一个新的 session 标识符</span></span><br><span class="line">Session::regenerate();</span><br><span class="line"><span class="comment">// 把一条数据暂存到 session 中</span></span><br><span class="line">Session::flash(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="comment">// 清空所有的暂存数据</span></span><br><span class="line">Session::reflash();</span><br><span class="line"><span class="comment">// 重新暂存当前暂存数据的子集</span></span><br><span class="line">Session::keep(<span class="keyword">array</span>(<span class="string">&#x27;key1&#x27;</span>, <span class="string">&#x27;key2&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求参数 form-data 与 raw 请求类型</span></span><br><span class="line">request()-&gt;input();</span><br><span class="line"><span class="comment">// url: http://xx.com/aa/bb</span></span><br><span class="line">Request::url();</span><br><span class="line"><span class="comment">// 路径: /aa/bb</span></span><br><span class="line">Request::path();</span><br><span class="line"><span class="comment">// 获取请求 Uri: /aa/bb/?c=d</span></span><br><span class="line">Request::getRequestUri();</span><br><span class="line"><span class="comment">// 返回用户的 IP</span></span><br><span class="line">Request::ip();</span><br><span class="line"><span class="comment">// 获取 Uri: http://xx.com/aa/bb/?c=d</span></span><br><span class="line">Request::getUri();</span><br><span class="line"><span class="comment">// 获取查询字符串: c=d</span></span><br><span class="line">Request::getQueryString();</span><br><span class="line"><span class="comment">// 获取请求端口 (例如 80, 443 等等)</span></span><br><span class="line">Request::getPort();</span><br><span class="line"><span class="comment">// 判断当前请求的 URI 是否可被匹配</span></span><br><span class="line">Request::is(<span class="string">&#x27;foo/*&#x27;</span>);</span><br><span class="line"><span class="comment">// 获取 URI 的分段值 (索引从 1 开始)</span></span><br><span class="line">Request::segment(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 从请求中取回头部信息</span></span><br><span class="line">Request::header(<span class="string">&#x27;Content-Type&#x27;</span>);</span><br><span class="line"><span class="comment">// 从请求中取回服务器变量</span></span><br><span class="line">Request::server(<span class="string">&#x27;PATH_INFO&#x27;</span>);</span><br><span class="line"><span class="comment">// 判断请求是否是 AJAX 请求</span></span><br><span class="line">Request::ajax();</span><br><span class="line"><span class="comment">// 判断请求是否使用 HTTPS</span></span><br><span class="line">Request::secure();</span><br><span class="line"><span class="comment">// 获取请求方法</span></span><br><span class="line">Request::method();</span><br><span class="line"><span class="comment">// 判断请求方法是否是指定类型的</span></span><br><span class="line">Request::isMethod(<span class="string">&#x27;post&#x27;</span>);</span><br><span class="line"><span class="comment">// 获取原始的 POST 数据</span></span><br><span class="line">Request::instance()-&gt;getContent();</span><br><span class="line"><span class="comment">// 获取请求要求返回的格式</span></span><br><span class="line">Request::format();</span><br><span class="line"><span class="comment">// 判断 HTTP Content-Type 头部信息是否包含 */json</span></span><br><span class="line">Request::isJson();</span><br><span class="line"><span class="comment">// 判断 HTTP Accept 头部信息是否为 application/json</span></span><br><span class="line">Request::wantsJson();</span><br></pre></td></tr></table></figure>

<h2 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> Response::make(<span class="variable">$contents</span>);</span><br><span class="line"><span class="keyword">return</span> Response::make(<span class="variable">$contents</span>, <span class="number">200</span>);</span><br><span class="line"><span class="keyword">return</span> Response::json(<span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="keyword">return</span> Response::json(<span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>))</span><br><span class="line">-&gt;setCallback(Input::get(<span class="string">&#x27;callback&#x27;</span>));</span><br><span class="line"><span class="keyword">return</span> Response::download(<span class="variable">$filepath</span>);</span><br><span class="line"><span class="keyword">return</span> Response::download(<span class="variable">$filepath</span>, <span class="variable">$filename</span>, <span class="variable">$headers</span>);</span><br><span class="line"><span class="comment">// 创建一个回应且修改其头部信息的值</span></span><br><span class="line"><span class="variable">$response</span> = Response::make(<span class="variable">$contents</span>, <span class="number">200</span>);</span><br><span class="line"><span class="variable">$response</span>-&gt;header(<span class="string">&#x27;Content-Type&#x27;</span>, <span class="string">&#x27;application/json&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> <span class="variable">$response</span>;</span><br><span class="line"><span class="comment">// 为回应附加上 cookie</span></span><br><span class="line"> <span class="keyword">return</span> Response::make(<span class="variable">$content</span>)</span><br><span class="line">-&gt;withCookie(Cookie::make(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>));</span><br></pre></td></tr></table></figure>

<h2 id="Redirect"><a href="#Redirect" class="headerlink" title="Redirect"></a>Redirect</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> Redirect::to(<span class="string">&#x27;foo/bar&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> Redirect::to(<span class="string">&#x27;foo/bar&#x27;</span>)-&gt;with(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> Redirect::to(<span class="string">&#x27;foo/bar&#x27;</span>)-&gt;withInput(Input::get());</span><br><span class="line"><span class="keyword">return</span> Redirect::to(<span class="string">&#x27;foo/bar&#x27;</span>)-&gt;withInput(Input::except(<span class="string">&#x27;password&#x27;</span>));</span><br><span class="line"><span class="keyword">return</span> Redirect::to(<span class="string">&#x27;foo/bar&#x27;</span>)-&gt;withErrors(<span class="variable">$validator</span>);</span><br><span class="line"><span class="comment">// 重定向到之前的请求</span></span><br><span class="line"><span class="keyword">return</span> Redirect::back();</span><br><span class="line"><span class="comment">// 重定向到命名路由（根据命名路由算出 URL）</span></span><br><span class="line"><span class="keyword">return</span> Redirect::route(<span class="string">&#x27;foobar&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> Redirect::route(<span class="string">&#x27;foobar&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="keyword">return</span> Redirect::route(<span class="string">&#x27;foobar&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="comment">// 重定向到控制器动作（根据控制器动作算出 URL）</span></span><br><span class="line"><span class="keyword">return</span> Redirect::action(<span class="string">&#x27;FooController@index&#x27;</span>);</span><br><span class="line"><span class="keyword">return</span> Redirect::action(<span class="string">&#x27;FooController@baz&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="keyword">return</span> Redirect::action(<span class="string">&#x27;FooController@baz&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="comment">// 跳转到目的地址，如果没有设置则使用默认值 foo/bar</span></span><br><span class="line"><span class="keyword">return</span> Redirect::intended(<span class="string">&#x27;foo/bar&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Input::get(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 指定默认值</span></span><br><span class="line">Input::get(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line">Input::has(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Input::all();</span><br><span class="line"><span class="comment">// 只取回 &#x27;foo&#x27; 和 &#x27;bar&#x27;，返回数组</span></span><br><span class="line">Input::only(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>);</span><br><span class="line"><span class="comment">// 取除了 &#x27;foo&#x27; 的所有用户输入数组</span></span><br><span class="line">Input::except(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">Input::flush();</span><br><span class="line"><span class="comment">// 字段 &#x27;key&#x27; 是否有值，返回 boolean</span></span><br><span class="line">Input::filled(<span class="string">&#x27;key&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="会话周期内-Input"><a href="#会话周期内-Input" class="headerlink" title="会话周期内 Input"></a>会话周期内 Input</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 清除会话周期内的输入</span></span><br><span class="line">Input::flash();</span><br><span class="line"><span class="comment">// 清除会话周期内的指定输入</span></span><br><span class="line">Input::flashOnly(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>);</span><br><span class="line"><span class="comment">// 清除会话周期内的除了指定的其他输入</span></span><br><span class="line">Input::flashExcept(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;baz&#x27;</span>);</span><br><span class="line"><span class="comment">// 取回一个旧的输入条目</span></span><br><span class="line">Input::old(<span class="string">&#x27;key&#x27;</span>,<span class="string">&#x27;default_value&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="Files"><a href="#Files" class="headerlink" title="Files"></a>Files</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用一个已上传的文件</span></span><br><span class="line">Input::file(<span class="string">&#x27;filename&#x27;</span>);</span><br><span class="line"><span class="comment">// 判断文件是否已上传</span></span><br><span class="line">Input::hasFile(<span class="string">&#x27;filename&#x27;</span>);</span><br><span class="line"><span class="comment">// 获取文件属性</span></span><br><span class="line">Input::file(<span class="string">&#x27;name&#x27;</span>)-&gt;getRealPath();</span><br><span class="line">Input::file(<span class="string">&#x27;name&#x27;</span>)-&gt;getClientOriginalName();</span><br><span class="line">Input::file(<span class="string">&#x27;name&#x27;</span>)-&gt;getClientOriginalExtension();</span><br><span class="line">Input::file(<span class="string">&#x27;name&#x27;</span>)-&gt;getSize();</span><br><span class="line">Input::file(<span class="string">&#x27;name&#x27;</span>)-&gt;getMimeType();</span><br><span class="line"><span class="comment">// 移动一个已上传的文件</span></span><br><span class="line">Input::file(<span class="string">&#x27;name&#x27;</span>)-&gt;move(<span class="variable">$destinationPath</span>);</span><br><span class="line"><span class="comment">// 移动一个已上传的文件，并设置新的名字</span></span><br><span class="line">Input::file(<span class="string">&#x27;name&#x27;</span>)-&gt;move(<span class="variable">$destinationPath</span>, <span class="variable">$fileName</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Validation"><a href="#Validation" class="headerlink" title="Validation"></a>Validation</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Validator::make(</span><br><span class="line"><span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;Foo&#x27;</span>),</span><br><span class="line"><span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;required|in:Foo&#x27;</span>)</span><br><span class="line">);</span><br><span class="line">Validator::extend(<span class="string">&#x27;foo&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$attribute</span>, <span class="variable">$value</span>, <span class="variable">$params</span></span>)</span>&#123;&#125;);</span><br><span class="line">Validator::extend(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;FooValidator@validate&#x27;</span>);</span><br><span class="line">Validator::resolver(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$translator</span>, <span class="variable">$data</span>, <span class="variable">$rules</span>, <span class="variable">$msgs</span></span>)</span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line"><span class="keyword">return</span> <span class="keyword">new</span> FooValidator(<span class="variable">$translator</span>, <span class="variable">$data</span>, <span class="variable">$rules</span>, <span class="variable">$msgs</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="验证规则"><a href="#验证规则" class="headerlink" title="验证规则"></a>验证规则</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">accepted <span class="comment">// 待验证字段必须是 yes ， on ，1 或 true </span></span><br><span class="line"></span><br><span class="line">active_url</span><br><span class="line"></span><br><span class="line">after:YYYY-MM-DD <span class="comment">// 待验证字段必须是给定的日期之后的值对应的日期。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 待验证字段必须是给定的日期之前的值对应的日期。</span></span><br><span class="line">before:YYYY-MM-DD</span><br><span class="line"></span><br><span class="line">alpha <span class="comment">// 待验证字段只能由字母组成。</span></span><br><span class="line"></span><br><span class="line">alpha_dash <span class="comment">// 待验证字段可能包含字母、数字，短破折号（-）和下划线（_）。</span></span><br><span class="line"></span><br><span class="line">alpha_num <span class="comment">// 待验证字段只能由字母和数字组成。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">array</span> <span class="comment">// 待验证字段必须是有效的 PHP 数组。</span></span><br><span class="line"></span><br><span class="line">between:<span class="number">1</span>,<span class="number">10</span> <span class="comment">// 验证字段的大小必须在给定的 min 和 max 之间。字符串、数字、数组和文件的计算方式都使用size方法</span></span><br><span class="line"></span><br><span class="line">confirmed <span class="comment">// 验证字段必须具有匹配字段 foo_confirmation </span></span><br><span class="line"></span><br><span class="line">date <span class="comment">// 根据 PHP strtotime 函数，验证的字段必须是有效的日期。</span></span><br><span class="line"></span><br><span class="line">date_format:YYYY-MM-DD <span class="comment">// 验证字段必须匹配给定的日期格式。</span></span><br><span class="line"></span><br><span class="line">different:fieldname <span class="comment">// 验证的字段值必须与字段 field 的值不同。</span></span><br><span class="line"></span><br><span class="line">digits:value <span class="comment">// 验证的字段必须为 numeric ，并且必须具有确切长度 _value_。</span></span><br><span class="line"></span><br><span class="line">digits_between:min,max <span class="comment">// 验证中的字段必须为数字，并且长度必须在给定的 min 和 max 之间。</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">boolean</span> <span class="comment">// 验证的字段必须可以转换为 Boolean 类型。</span></span><br><span class="line"></span><br><span class="line">email <span class="comment">// 验证的字段必须符合 e-mail 地址格式。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 验证的字段必须存在于给定的数据库表中。</span></span><br><span class="line">exists:table,column</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">image <span class="comment">// 验证的文件必须是图片 (jpeg, png, bmp, gif, svg, or webp)</span></span><br><span class="line"></span><br><span class="line">in:foo,bar,... <span class="comment">// 验证字段必须包含在给定的值列表中。</span></span><br><span class="line">not_in:foo,bar,... <span class="comment">// 验证字段不能包含在给定的值的列表中</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">integer</span> <span class="comment">// 验证的字段必须是整数。</span></span><br><span class="line">numeric <span class="comment">// 验证字段必须为数值。</span></span><br><span class="line">ip <span class="comment">// 验证的字段必须是 IP 地址。</span></span><br><span class="line">max:value <span class="comment">// 验证中的字段必须小于或等于 value。字符串、数字、数组或是文件大小的计算方式都用 size规则。</span></span><br><span class="line">min:value <span class="comment">// 验证中的字段必须小于或等于 value。同 max</span></span><br><span class="line">mimes:jpeg,png <span class="comment">// 验证的文件必须具有与列出的其中一个扩展名相对应的 MIME 类型。</span></span><br><span class="line">regex:[<span class="number">0</span>-<span class="number">9</span>] <span class="comment">// 验证字段必须与给定的正则表达式匹配。</span></span><br><span class="line"></span><br><span class="line">required <span class="comment">// 验证的字段必须存在于输入数据中，而不是空。</span></span><br><span class="line">required_if:field,value</span><br><span class="line">required_with:foo,bar,...</span><br><span class="line">required_with_all:foo,bar,...</span><br><span class="line">required_without:foo,bar,...</span><br><span class="line">required_without_all:foo,bar,...</span><br><span class="line"></span><br><span class="line">same:field <span class="comment">// 验证字段的值必须与给定字段的值相同。</span></span><br><span class="line">size:value <span class="comment">// 验证字段必须与给定值的大小一致。字符串(字符数),数字(数值),数组(count),文件(kb)</span></span><br><span class="line"></span><br><span class="line">timezone <span class="comment">// 验证字段必须为符合 timezone_identifiers_list 所定义的有效时区标识。</span></span><br><span class="line">unique:table,column,except,idColumn <span class="comment">// 验证字段在给定的数据库表中必须是唯一的。</span></span><br><span class="line">url <span class="comment">// 验证的字段必须是有效的 URL。</span></span><br></pre></td></tr></table></figure>

<h2 id="Auth"><a href="#Auth" class="headerlink" title="Auth"></a>Auth</h2><h3 id="用户认证"><a href="#用户认证" class="headerlink" title="用户认证"></a>用户认证</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取 Auth 对象，等同于 Auth Facade</span></span><br><span class="line">auth();</span><br><span class="line"><span class="comment">// 判断当前用户是否已认证（是否已登录）</span></span><br><span class="line">Auth::check();</span><br><span class="line"><span class="comment">// 判断当前用户是否未登录，与 check() 相反</span></span><br><span class="line">Auth::guest();</span><br><span class="line"><span class="comment">// 自定义看守器 默认为 `web`</span></span><br><span class="line">Auth::guard();</span><br><span class="line"><span class="comment">// 获取当前的认证用户</span></span><br><span class="line">Auth::user();</span><br><span class="line"><span class="comment">// 获取当前的认证用户的 ID（未登录情况下会报错）</span></span><br><span class="line">Auth::id();</span><br><span class="line"><span class="comment">// 通过给定的信息来尝试对用户进行认证（成功后会自动启动会话）</span></span><br><span class="line">Auth::attempt([<span class="string">&#x27;email&#x27;</span> =&gt; <span class="variable">$email</span>, <span class="string">&#x27;password&#x27;</span> =&gt; <span class="variable">$password</span>]);</span><br><span class="line"><span class="comment">// 通过 Auth::attempt() 传入 true 值来开启 &#x27;记住我&#x27; 功能</span></span><br><span class="line">Auth::attempt(<span class="variable">$credentials</span>, <span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 注册尝试登录的事件监听器</span></span><br><span class="line">Auth::attempting(<span class="variable">$callback</span>);</span><br><span class="line"><span class="comment">// 只针对一次的请求来认证用户</span></span><br><span class="line">Auth::once(<span class="variable">$credentials</span>);</span><br><span class="line"><span class="comment">// 使用 ID 登录，无 Cookie 和会话登录</span></span><br><span class="line">Auth::onceUsingId(<span class="variable">$id</span>);</span><br><span class="line"><span class="comment">// 登录一个指定用户到应用上</span></span><br><span class="line">Auth::login(User::find(<span class="number">1</span>), <span class="variable">$remember</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 检测是否记住了登录</span></span><br><span class="line">Auth::viaRemember();</span><br><span class="line"><span class="comment">// 登录指定用户 ID 的用户到应用上</span></span><br><span class="line">Auth::loginUsingId(<span class="number">1</span>, <span class="variable">$remember</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 使用户退出登录（清除会话）</span></span><br><span class="line">Auth::logout();</span><br><span class="line"><span class="comment">// 清除当前用户的其他会话</span></span><br><span class="line">Auth::logoutOtherDevices(<span class="string">&#x27;password&#x27;</span>, <span class="variable">$attribute</span> = <span class="string">&#x27;password&#x27;</span>);</span><br><span class="line"><span class="comment">// 验证用户凭证</span></span><br><span class="line">Auth::validate(<span class="variable">$credentials</span>);</span><br><span class="line"><span class="comment">// 使用 HTTP 的基本认证方式来认证</span></span><br><span class="line">Auth::basic(<span class="string">&#x27;username&#x27;</span>);</span><br><span class="line"><span class="comment">// 执行「HTTP Basic」登录尝试，只认证一次</span></span><br><span class="line">Auth::onceBasic();</span><br><span class="line"><span class="comment">// 发送密码重置提示给用户</span></span><br><span class="line">Password::remind(<span class="variable">$credentials</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$message</span>, <span class="variable">$user</span></span>)</span>&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="用户授权"><a href="#用户授权" class="headerlink" title="用户授权"></a>用户授权</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义权限</span></span><br><span class="line">Gate::define(<span class="string">&#x27;update-post&#x27;</span>, <span class="string">&#x27;Class@method&#x27;</span>);</span><br><span class="line">Gate::define(<span class="string">&#x27;update-post&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$user</span>, <span class="variable">$post</span></span>) </span>&#123;...&#125;);</span><br><span class="line"><span class="comment">// 传递多个参数</span></span><br><span class="line">Gate::define(<span class="string">&#x27;delete-comment&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$user</span>, <span class="variable">$post</span>, <span class="variable">$comment</span></span>) </span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 一次性的定义多个 Gate 方法</span></span><br><span class="line">Gate::resource(<span class="string">&#x27;posts&#x27;</span>,  <span class="string">&#x27;App\Policies\PostPolicy&#x27;</span>);</span><br><span class="line"><span class="comment">// 检测权限是否被定义</span></span><br><span class="line">Gate::has(<span class="string">&#x27;update-post&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 检查权限</span></span><br><span class="line">Gate::denies(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line">Gate::allows(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line">Gate::check(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line"><span class="comment">// 指定用户进行检查</span></span><br><span class="line">Gate::forUser(<span class="variable">$user</span>)-&gt;allows(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line"><span class="comment">// 在 User 模型下，使用 Authorizable trait</span></span><br><span class="line">User::find(<span class="number">1</span>)-&gt;can(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line">User::find(<span class="number">1</span>)-&gt;cannot(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line">User::find(<span class="number">1</span>)-&gt;cant(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 拦截所有检查，返回 bool</span></span><br><span class="line">Gate::before(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$user</span>, <span class="variable">$ability</span></span>) </span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 设置每一次验证的回调</span></span><br><span class="line">Gate::after(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$user</span>, <span class="variable">$ability</span>, <span class="variable">$result</span>, <span class="variable">$arguments</span></span>) </span>&#123;&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Blade 模板语法</span></span><br><span class="line">@can(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>)</span><br><span class="line">@endcan</span><br><span class="line"><span class="comment">// 支持 else 表达式</span></span><br><span class="line">@can(<span class="string">&#x27;update-post&#x27;</span>, <span class="variable">$post</span>)</span><br><span class="line">@<span class="keyword">else</span></span><br><span class="line">@endcan</span><br><span class="line"><span class="comment">// 无权限判断</span></span><br><span class="line">@cannot</span><br><span class="line">@endcannot</span><br><span class="line"></span><br><span class="line"><span class="comment">// 生成一个新的策略</span></span><br><span class="line">php artisan make:policy PostPolicy</span><br><span class="line">php artisan make:policy PostPolicy --model=Post</span><br><span class="line"><span class="comment">// `policy` 帮助函数</span></span><br><span class="line">policy(<span class="variable">$post</span>)-&gt;update(<span class="variable">$user</span>, <span class="variable">$post</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 控制器授权</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;authorize(<span class="string">&#x27;update&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line"><span class="comment">// 指定用户 $user 授权</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;authorizeForUser(<span class="variable">$user</span>, <span class="string">&#x27;update&#x27;</span>, <span class="variable">$post</span>);</span><br><span class="line"><span class="comment">// 控制器的 __construct 中授权资源控制器</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;authorizeResource(Post::class,  <span class="string">&#x27;post&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// AuthServiceProvider-&gt;boot() 里修改策略自动发现的逻辑</span></span><br><span class="line">Gate::guessPolicyNamesUsing(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$modelClass</span></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// 返回模型对应的策略名称，如：// &#x27;App\Model\User&#x27; =&gt; &#x27;App\Policies\UserPolicy&#x27;,</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&#x27;App\Policies\\&#x27;</span>.class_basename(<span class="variable">$modelClass</span>).<span class="string">&#x27;Policy&#x27;</span>;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 中间件指定模型实例</span></span><br><span class="line">Route::put(<span class="string">&#x27;/post/&#123;post&#125;&#x27;</span>,  <span class="function"><span class="keyword">function</span>  (<span class="params">Post <span class="variable">$post</span></span>)  </span>&#123; ... &#125;)-&gt;middleware(<span class="string">&#x27;can:update,post&#x27;</span>);</span><br><span class="line"><span class="comment">// 中间件未指定模型实例</span></span><br><span class="line">Route::post(<span class="string">&#x27;/post&#x27;</span>,  <span class="function"><span class="keyword">function</span>  (<span class="params"></span>)  </span>&#123; ... &#125;)-&gt;middleware(<span class="string">&#x27;can:create,App\Post&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Event"><a href="#Event" class="headerlink" title="Event"></a>Event</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1. EventServiceProvider 类里的 $listen 属性</span></span><br><span class="line"><span class="keyword">protected</span> <span class="variable">$listen</span> =[<span class="string">&#x27;App\Events\OrderShipped&#x27;</span> =&gt; [<span class="string">&#x27;App\Listeners\SendShipmentNotification&#x27;</span>]];</span><br><span class="line"><span class="comment">// 2. 生成监听类</span></span><br><span class="line">php artisan event:generate</span><br><span class="line"></span><br><span class="line"><span class="comment">// 触发命令</span></span><br><span class="line">Event::fire(<span class="variable">$event</span>, <span class="variable">$payload</span> = [], <span class="variable">$halt</span> = <span class="literal">false</span>);</span><br><span class="line">Event::dispatch(<span class="variable">$event</span>, <span class="variable">$payload</span> = [], <span class="variable">$halt</span> = <span class="literal">false</span>);</span><br><span class="line">event(<span class="variable">$event</span>, <span class="variable">$payload</span> = [], <span class="variable">$halt</span> = <span class="literal">false</span>);</span><br><span class="line"><span class="comment">// 触发命令并等待</span></span><br><span class="line">Event::until(<span class="variable">$event</span>, <span class="variable">$payload</span> = []);</span><br><span class="line"><span class="comment">// 注册一个事件监听器.</span></span><br><span class="line"><span class="comment">// void listen(string|array $events, mixed $listener, int $priority)</span></span><br><span class="line">Event::listen(<span class="string">&#x27;App\Events\UserSignup&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$bar</span></span>)</span>&#123;&#125;);</span><br><span class="line">Event::listen(<span class="string">&#x27;event.*&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$bar</span></span>)</span>&#123;&#125;); <span class="comment">// 通配符监听器</span></span><br><span class="line">Event::listen(<span class="string">&#x27;foo.bar&#x27;</span>, <span class="string">&#x27;FooHandler&#x27;</span>, <span class="number">10</span>);</span><br><span class="line">Event::listen(<span class="string">&#x27;foo.bar&#x27;</span>, <span class="string">&#x27;BarHandler&#x27;</span>, <span class="number">5</span>);</span><br><span class="line"><span class="comment">// 你可以直接在处理逻辑中返回 false 来停止一个事件的传播.</span></span><br><span class="line">Event::listen(<span class="string">&#x27;foor.bar&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$event</span></span>)</span>&#123; <span class="keyword">return</span> <span class="literal">false</span>; &#125;);</span><br><span class="line">Event::subscribe(<span class="string">&#x27;UserEventHandler&#x27;</span>);</span><br><span class="line"><span class="comment">// 获取所有监听者</span></span><br><span class="line">Event::getListeners(<span class="variable">$eventName</span>);</span><br><span class="line"><span class="comment">// 移除事件及其对应的监听者</span></span><br><span class="line">Event::forget(<span class="variable">$event</span>);</span><br><span class="line"><span class="comment">// 将事件推入堆栈中等待执行</span></span><br><span class="line">Event::push(<span class="variable">$event</span>, <span class="variable">$payload</span> = []);</span><br><span class="line"><span class="comment">// 移除指定的堆栈事件</span></span><br><span class="line">Event::flush(<span class="variable">$event</span>);</span><br><span class="line"><span class="comment">// 移除所有堆栈中的事件</span></span><br><span class="line">Event::forgetPushed();</span><br></pre></td></tr></table></figure>

<h2 id="Security"><a href="#Security" class="headerlink" title="Security"></a>Security</h2><h3 id="哈希"><a href="#哈希" class="headerlink" title="哈希"></a>哈希</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Hash::make(<span class="string">&#x27;secretpassword&#x27;</span>);</span><br><span class="line">Hash::check(<span class="string">&#x27;secretpassword&#x27;</span>, <span class="variable">$hashedPassword</span>);</span><br><span class="line">Hash::needsRehash(<span class="variable">$hashedPassword</span>);</span><br></pre></td></tr></table></figure>

<h3 id="加密解密"><a href="#加密解密" class="headerlink" title="加密解密"></a>加密解密</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Crypt::encrypt(<span class="string">&#x27;secretstring&#x27;</span>);</span><br><span class="line">Crypt::decrypt(<span class="variable">$encryptedString</span>);</span><br><span class="line">Crypt::setMode(<span class="string">&#x27;ctr&#x27;</span>);</span><br><span class="line">Crypt::setCipher(<span class="variable">$cipher</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Queue"><a href="#Queue" class="headerlink" title="Queue"></a>Queue</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Queue::push(<span class="string">&#x27;SendMail&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;message&#x27;</span> =&gt; <span class="variable">$message</span>));</span><br><span class="line">Queue::push(<span class="string">&#x27;SendEmail@send&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;message&#x27;</span> =&gt; <span class="variable">$message</span>));</span><br><span class="line">Queue::push(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$job</span></span>) <span class="keyword">use</span> $<span class="title">id</span> </span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 在多个 workers 中使用相同的负载</span></span><br><span class="line"> Queue::bulk(<span class="keyword">array</span>(<span class="string">&#x27;SendEmail&#x27;</span>, <span class="string">&#x27;NotifyUser&#x27;</span>), <span class="variable">$payload</span>);</span><br><span class="line"><span class="comment">// 开启队列监听器</span></span><br><span class="line">php artisan queue:listen</span><br><span class="line">php artisan queue:listen connection</span><br><span class="line">php artisan queue:listen --timeout=<span class="number">60</span></span><br><span class="line"><span class="comment">// 只处理第一个队列任务</span></span><br><span class="line">php artisan queue:work</span><br><span class="line"><span class="comment">// 在后台模式启动一个队列 worker</span></span><br><span class="line">php artisan queue:work --daemon</span><br><span class="line"><span class="comment">// 为失败的任务创建 migration 文件</span></span><br><span class="line">php artisan queue:failed-table</span><br><span class="line"><span class="comment">// 监听失败任务</span></span><br><span class="line">php artisan queue:failed</span><br><span class="line"><span class="comment">// 通过 id 删除失败的任务</span></span><br><span class="line">php artisan queue:forget <span class="number">5</span></span><br><span class="line"><span class="comment">// 删除所有失败任务</span></span><br><span class="line">php artisan queue:flush</span><br><span class="line"><span class="comment">// 因为队列不会默认使用 PHP memory 参数，需要在队列指定(单位默认mb)</span></span><br><span class="line">php artisan queue:work --memory=<span class="number">50</span></span><br></pre></td></tr></table></figure>

<h2 id="Mail"><a href="#Mail" class="headerlink" title="Mail"></a>Mail</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Mail::send(<span class="string">&#x27;email.view&#x27;</span>, <span class="variable">$data</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$message</span></span>)</span>&#123;&#125;);</span><br><span class="line">Mail::send(<span class="keyword">array</span>(<span class="string">&#x27;html.view&#x27;</span>, <span class="string">&#x27;text.view&#x27;</span>), <span class="variable">$data</span>, <span class="variable">$callback</span>);</span><br><span class="line">Mail::queue(<span class="string">&#x27;email.view&#x27;</span>, <span class="variable">$data</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$message</span></span>)</span>&#123;&#125;);</span><br><span class="line">Mail::queueOn(<span class="string">&#x27;queue-name&#x27;</span>, <span class="string">&#x27;email.view&#x27;</span>, <span class="variable">$data</span>, <span class="variable">$callback</span>);</span><br><span class="line">Mail::later(<span class="number">5</span>, <span class="string">&#x27;email.view&#x27;</span>, <span class="variable">$data</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$message</span></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 临时将发送邮件请求写入 log，方便测试</span></span><br><span class="line"> Mail::pretend();</span><br></pre></td></tr></table></figure>

<h3 id="消息"><a href="#消息" class="headerlink" title="消息"></a>消息</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这些都能在 $message 实例中使用, 并可传入到 Mail::send() 或 Mail::queue()</span></span><br><span class="line"><span class="variable">$message</span>-&gt;from(<span class="string">&#x27;email@example.com&#x27;</span>, <span class="string">&#x27;Mr. Example&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;sender(<span class="string">&#x27;email@example.com&#x27;</span>, <span class="string">&#x27;Mr. Example&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;returnPath(<span class="string">&#x27;email@example.com&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;to(<span class="string">&#x27;email@example.com&#x27;</span>, <span class="string">&#x27;Mr. Example&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;cc(<span class="string">&#x27;email@example.com&#x27;</span>, <span class="string">&#x27;Mr. Example&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;bcc(<span class="string">&#x27;email@example.com&#x27;</span>, <span class="string">&#x27;Mr. Example&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;replyTo(<span class="string">&#x27;email@example.com&#x27;</span>, <span class="string">&#x27;Mr. Example&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;subject(<span class="string">&#x27;Welcome to the Jungle&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;priority(<span class="number">2</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;attach(<span class="string">&#x27;foo\bar.txt&#x27;</span>, <span class="variable">$options</span>);</span><br><span class="line"><span class="comment">// 使用内存数据作为附件</span></span><br><span class="line"><span class="variable">$message</span>-&gt;attachData(<span class="string">&#x27;bar&#x27;</span>, <span class="string">&#x27;Data Name&#x27;</span>, <span class="variable">$options</span>);</span><br><span class="line"><span class="comment">// 附带文件，并返回 CID</span></span><br><span class="line"><span class="variable">$message</span>-&gt;embed(<span class="string">&#x27;foo\bar.txt&#x27;</span>);</span><br><span class="line"><span class="variable">$message</span>-&gt;embedData(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;Data Name&#x27;</span>, <span class="variable">$options</span>);</span><br><span class="line"><span class="comment">// 获取底层的 Swift Message 对象</span></span><br><span class="line"><span class="variable">$message</span>-&gt;getSwiftMessage();</span><br></pre></td></tr></table></figure>

<h2 id="Cache"><a href="#Cache" class="headerlink" title="Cache"></a>Cache</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取缓存对象，约等于 Cache</span></span><br><span class="line">cache()</span><br><span class="line"><span class="comment">// 注意 5.8 缓存单位为「秒」，之前版本为「分」</span></span><br><span class="line">Cache::put(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, <span class="variable">$seconds</span>);</span><br><span class="line"><span class="comment">// 未设置过期时间将永久有效</span></span><br><span class="line">Cache::put(<span class="string">&#x27;key&#x27;</span>,  <span class="string">&#x27;value&#x27;</span>); </span><br><span class="line">Cache::add(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>, <span class="variable">$seconds</span>);</span><br><span class="line">Cache::forever(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line">Cache::sear(<span class="string">&#x27;key&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="string">&#x27;value&#x27;</span> &#125;);</span><br><span class="line">Cache::remember(<span class="string">&#x27;key&#x27;</span>, <span class="variable">$seconds</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="string">&#x27;value&#x27;</span> &#125;);</span><br><span class="line">Cache::rememberForever(<span class="string">&#x27;key&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="string">&#x27;value&#x27;</span> &#125;);</span><br><span class="line">Cache::forget(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::has(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::get(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::get(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line">Cache::get(<span class="string">&#x27;key&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="string">&#x27;default&#x27;</span>; &#125;);</span><br><span class="line"><span class="comment">// 取到数据之后再删除它</span></span><br><span class="line">Cache::pull(<span class="string">&#x27;key&#x27;</span>); </span><br><span class="line"><span class="comment">// 清空所有缓存</span></span><br><span class="line">Cache::flush();</span><br><span class="line">Cache::increment(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::increment(<span class="string">&#x27;key&#x27;</span>, <span class="variable">$amount</span>);</span><br><span class="line">Cache::decrement(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::decrement(<span class="string">&#x27;key&#x27;</span>, <span class="variable">$amount</span>);</span><br><span class="line">Cache::tags(<span class="string">&#x27;my-tag&#x27;</span>)-&gt;put(<span class="string">&#x27;key&#x27;</span>,<span class="string">&#x27;value&#x27;</span>, <span class="variable">$seconds</span>);</span><br><span class="line">Cache::tags(<span class="string">&#x27;my-tag&#x27;</span>)-&gt;has(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::tags(<span class="string">&#x27;my-tag&#x27;</span>)-&gt;get(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::tags([<span class="string">&#x27;people&#x27;</span>,  <span class="string">&#x27;artists&#x27;</span>])-&gt;put(<span class="string">&#x27;John&#x27;</span>,  <span class="variable">$john</span>,  <span class="variable">$seconds</span>);</span><br><span class="line">Cache::tags(<span class="string">&#x27;my-tag&#x27;</span>)-&gt;forget(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::tags(<span class="string">&#x27;my-tag&#x27;</span>)-&gt;flush();</span><br><span class="line">Cache::tags([<span class="string">&#x27;people&#x27;</span>,  <span class="string">&#x27;authors&#x27;</span>])-&gt;flush();</span><br><span class="line">Cache::section(<span class="string">&#x27;group&#x27;</span>)-&gt;put(<span class="string">&#x27;key&#x27;</span>, <span class="variable">$value</span>);</span><br><span class="line">Cache::section(<span class="string">&#x27;group&#x27;</span>)-&gt;get(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">Cache::section(<span class="string">&#x27;group&#x27;</span>)-&gt;flush();</span><br><span class="line">Cache::tags([<span class="string">&#x27;people&#x27;</span>,  <span class="string">&#x27;artists&#x27;</span>])-&gt;put(<span class="string">&#x27;John&#x27;</span>,  <span class="variable">$john</span>,  <span class="variable">$seconds</span>);</span><br><span class="line"><span class="comment">// 辅助函数</span></span><br><span class="line">cache(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">cache([<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>], <span class="variable">$seconds</span>);</span><br><span class="line">cache([<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>], now()-&gt;addMinutes(<span class="number">10</span>));</span><br><span class="line">cache()-&gt;remember(<span class="string">&#x27;users&#x27;</span>,  <span class="variable">$seconds</span>,  <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123; <span class="keyword">return</span>  User::all(); &#125;);</span><br><span class="line"><span class="comment">// 指定缓存存储</span></span><br><span class="line">Cache::store(<span class="string">&#x27;file&#x27;</span>)-&gt;get(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">Cache::store(<span class="string">&#x27;redis&#x27;</span>)-&gt;put(<span class="string">&#x27;name&#x27;</span>,  <span class="string">&#x27;Jack&#x27;</span>,  <span class="number">600</span>);  <span class="comment">// 10 分钟</span></span><br><span class="line"><span class="comment">// 事件</span></span><br><span class="line"><span class="string">&#x27;Illuminate\Cache\Events\CacheHit&#x27;</span> =&gt; [<span class="string">&#x27;App\Listeners\LogCacheHit&#x27;</span>,],</span><br><span class="line"><span class="string">&#x27;Illuminate\Cache\Events\CacheMissed&#x27;</span> =&gt; [<span class="string">&#x27;App\Listeners\LogCacheMissed&#x27;</span>,],</span><br><span class="line"><span class="string">&#x27;Illuminate\Cache\Events\KeyForgotten&#x27;</span> =&gt; [<span class="string">&#x27;App\Listeners\LogKeyForgotten&#x27;</span>,],</span><br><span class="line"><span class="string">&#x27;Illuminate\Cache\Events\KeyWritten&#x27;</span> =&gt; [<span class="string">&#x27;App\Listeners\LogKeyWritten&#x27;</span>,],</span><br></pre></td></tr></table></figure>

<h2 id="DB"><a href="#DB" class="headerlink" title="DB"></a>DB</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">DB::connection(<span class="string">&#x27;connection_name&#x27;</span>);</span><br><span class="line"><span class="comment">// 运行数据库查询语句</span></span><br><span class="line"><span class="variable">$results</span> = DB::select(<span class="string">&#x27;select * from users where id = ?&#x27;</span>, [<span class="number">1</span>]);</span><br><span class="line"><span class="variable">$results</span> = DB::select(<span class="string">&#x27;select * from users where id = :id&#x27;</span>, [<span class="string">&#x27;id&#x27;</span> =&gt; <span class="number">1</span>]);</span><br><span class="line"><span class="comment">// 运行普通语句</span></span><br><span class="line">DB::statement(<span class="string">&#x27;drop table users&#x27;</span>);</span><br><span class="line"><span class="comment">// 监听查询事件</span></span><br><span class="line">DB::listen(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$sql</span>, <span class="variable">$bindings</span>, <span class="variable">$time</span></span>) </span>&#123; code_here; &#125;);</span><br><span class="line"><span class="comment">// 数据库事务处理</span></span><br><span class="line">DB::transaction(<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;update([<span class="string">&#x27;votes&#x27;</span> =&gt; <span class="number">1</span>]);</span><br><span class="line">    DB::table(<span class="string">&#x27;posts&#x27;</span>)-&gt;delete();</span><br><span class="line">&#125;);</span><br><span class="line">DB::beginTransaction();</span><br><span class="line">DB::rollBack();</span><br><span class="line">DB::commit();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取表前缀</span></span><br><span class="line">DB::getTablePrefix()</span><br></pre></td></tr></table></figure>

<h3 id="查询语句构造器"><a href="#查询语句构造器" class="headerlink" title="查询语句构造器"></a>查询语句构造器</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取得数据表的所有行</span></span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 取数据表的部分数据</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;chunk(<span class="number">100</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$users</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">foreach</span> (<span class="variable">$users</span> <span class="keyword">as</span> <span class="variable">$user</span>) &#123;</span><br><span class="line">      <span class="comment">//</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 取回数据表的第一条数据</span></span><br><span class="line"><span class="variable">$user</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;John&#x27;</span>)-&gt;first();</span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;first();</span><br><span class="line"><span class="comment">// 从单行中取出单列数据</span></span><br><span class="line"><span class="variable">$name</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;John&#x27;</span>)-&gt;pluck(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;pluck(<span class="string">&#x27;column&#x27;</span>);</span><br><span class="line"><span class="comment">// 取多行数据的「列数据」数组</span></span><br><span class="line"><span class="variable">$roles</span> = DB::table(<span class="string">&#x27;roles&#x27;</span>)-&gt;lists(<span class="string">&#x27;title&#x27;</span>);</span><br><span class="line"><span class="variable">$roles</span> = DB::table(<span class="string">&#x27;roles&#x27;</span>)-&gt;lists(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="comment">// 指定一个选择字段</span></span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;select(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;email&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;distinct()-&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;select(<span class="string">&#x27;name as user_name&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 添加一个选择字段到一个已存在的查询语句中</span></span><br><span class="line"><span class="variable">$query</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;select(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="variable">$users</span> = <span class="variable">$query</span>-&gt;addSelect(<span class="string">&#x27;age&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 使用 Where 运算符</span></span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;votes&#x27;</span>, <span class="string">&#x27;&gt;&#x27;</span>, <span class="number">100</span>)-&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">              -&gt;where(<span class="string">&#x27;votes&#x27;</span>, <span class="string">&#x27;&gt;&#x27;</span>, <span class="number">100</span>)</span><br><span class="line">              -&gt;orWhere(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;John&#x27;</span>)</span><br><span class="line">              -&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;whereBetween(<span class="string">&#x27;votes&#x27;</span>, [<span class="number">1</span>, <span class="number">100</span>])-&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;whereNotBetween(<span class="string">&#x27;votes&#x27;</span>, [<span class="number">1</span>, <span class="number">100</span>])-&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;whereIn(<span class="string">&#x27;id&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])-&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;whereNotIn(<span class="string">&#x27;id&#x27;</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])-&gt;get();</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;whereNull(<span class="string">&#x27;updated_at&#x27;</span>)-&gt;get();</span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;whereNotNull(<span class="string">&#x27;column&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 动态的 Where 字段</span></span><br><span class="line"><span class="variable">$admin</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;whereId(<span class="number">1</span>)-&gt;first();</span><br><span class="line"><span class="variable">$john</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;whereIdAndEmail(<span class="number">2</span>, <span class="string">&#x27;john@doe.com&#x27;</span>)</span><br><span class="line">      -&gt;first();</span><br><span class="line"><span class="variable">$jane</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;whereNameOrAge(<span class="string">&#x27;Jane&#x27;</span>, <span class="number">22</span>)</span><br><span class="line">      -&gt;first();</span><br><span class="line"><span class="comment">// Order By, Group By, 和 Having</span></span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">      -&gt;orderBy(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;desc&#x27;</span>)</span><br><span class="line">      -&gt;groupBy(<span class="string">&#x27;count&#x27;</span>)</span><br><span class="line">      -&gt;having(<span class="string">&#x27;count&#x27;</span>, <span class="string">&#x27;&gt;&#x27;</span>, <span class="number">100</span>)</span><br><span class="line">      -&gt;get();</span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;orderBy(<span class="string">&#x27;column&#x27;</span>)-&gt;get();</span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;orderBy(<span class="string">&#x27;column&#x27;</span>,<span class="string">&#x27;desc&#x27;</span>)-&gt;get();</span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;having(<span class="string">&#x27;count&#x27;</span>, <span class="string">&#x27;&gt;&#x27;</span>, <span class="number">100</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 偏移 &amp; 限制</span></span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;skip(<span class="number">10</span>)-&gt;take(<span class="number">5</span>)-&gt;get();</span><br></pre></td></tr></table></figure>

<h3 id="Joins"><a href="#Joins" class="headerlink" title="Joins"></a>Joins</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 基本的 Join 声明语句</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">    -&gt;join(<span class="string">&#x27;contacts&#x27;</span>, <span class="string">&#x27;users.id&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;contacts.user_id&#x27;</span>)</span><br><span class="line">    -&gt;join(<span class="string">&#x27;orders&#x27;</span>, <span class="string">&#x27;users.id&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;orders.user_id&#x27;</span>)</span><br><span class="line">    -&gt;select(<span class="string">&#x27;users.id&#x27;</span>, <span class="string">&#x27;contacts.phone&#x27;</span>, <span class="string">&#x27;orders.price&#x27;</span>)</span><br><span class="line">    -&gt;get();</span><br><span class="line"><span class="comment">// Left Join 声明语句</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">-&gt;leftJoin(<span class="string">&#x27;posts&#x27;</span>, <span class="string">&#x27;users.id&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;posts.user_id&#x27;</span>)</span><br><span class="line">-&gt;get();</span><br><span class="line"><span class="comment">// select * from users where name = &#x27;John&#x27; or (votes &gt; 100 and title &lt;&gt; &#x27;Admin&#x27;)</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">    -&gt;where(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;John&#x27;</span>)</span><br><span class="line">    -&gt;orWhere(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$query</span></span>) </span>&#123;</span><br><span class="line">        <span class="variable">$query</span>-&gt;where(<span class="string">&#x27;votes&#x27;</span>, <span class="string">&#x27;&gt;&#x27;</span>, <span class="number">100</span>)</span><br><span class="line">              -&gt;where(<span class="string">&#x27;title&#x27;</span>, <span class="string">&#x27;&lt;&gt;&#x27;</span>, <span class="string">&#x27;Admin&#x27;</span>);</span><br><span class="line">    &#125;)</span><br><span class="line">    -&gt;get();</span><br></pre></td></tr></table></figure>

<h3 id="聚合"><a href="#聚合" class="headerlink" title="聚合"></a>聚合</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;count();</span><br><span class="line"><span class="variable">$price</span> = DB::table(<span class="string">&#x27;orders&#x27;</span>)-&gt;max(<span class="string">&#x27;price&#x27;</span>);</span><br><span class="line"><span class="variable">$price</span> = DB::table(<span class="string">&#x27;orders&#x27;</span>)-&gt;min(<span class="string">&#x27;price&#x27;</span>);</span><br><span class="line"><span class="variable">$price</span> = DB::table(<span class="string">&#x27;orders&#x27;</span>)-&gt;avg(<span class="string">&#x27;price&#x27;</span>);</span><br><span class="line"><span class="variable">$total</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;sum(<span class="string">&#x27;votes&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="原始表达句"><a href="#原始表达句" class="headerlink" title="原始表达句"></a>原始表达句</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">                   -&gt;select(DB::raw(<span class="string">&#x27;count(*) as user_count, status&#x27;</span>))</span><br><span class="line">                   -&gt;where(<span class="string">&#x27;status&#x27;</span>, <span class="string">&#x27;&lt;&gt;&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">                   -&gt;groupBy(<span class="string">&#x27;status&#x27;</span>)</span><br><span class="line">                   -&gt;get();</span><br><span class="line"><span class="comment">// 返回行</span></span><br><span class="line">DB::select(<span class="string">&#x27;select * from users where id = ?&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;value&#x27;</span>));</span><br><span class="line">DB::insert(<span class="string">&#x27;insert into foo set bar=2&#x27;</span>);</span><br><span class="line">DB::update(<span class="string">&#x27;update foo set bar=2&#x27;</span>);</span><br><span class="line">DB::delete(<span class="string">&#x27;delete from bar&#x27;</span>);</span><br><span class="line"><span class="comment">// 返回 void</span></span><br><span class="line">DB::statement(<span class="string">&#x27;update foo set bar=2&#x27;</span>);</span><br><span class="line"><span class="comment">// 在声明语句中加入原始的表达式</span></span><br><span class="line">DB::table(<span class="string">&#x27;name&#x27;</span>)-&gt;select(DB::raw(<span class="string">&#x27;count(*) as count, column2&#x27;</span>))-&gt;get();</span><br></pre></td></tr></table></figure>

<h3 id="Inserts-Updates-Deletes-Unions-Pessimistic-Locking"><a href="#Inserts-Updates-Deletes-Unions-Pessimistic-Locking" class="headerlink" title="Inserts / Updates / Deletes / Unions / Pessimistic Locking"></a>Inserts / Updates / Deletes / Unions / Pessimistic Locking</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 插入</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;insert(</span><br><span class="line">  [<span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;john@example.com&#x27;</span>, <span class="string">&#x27;votes&#x27;</span> =&gt; <span class="number">0</span>]</span><br><span class="line">);</span><br><span class="line"><span class="variable">$id</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;insertGetId(</span><br><span class="line">  [<span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;john@example.com&#x27;</span>, <span class="string">&#x27;votes&#x27;</span> =&gt; <span class="number">0</span>]</span><br><span class="line">);</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;insert([</span><br><span class="line">  [<span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;taylor@example.com&#x27;</span>, <span class="string">&#x27;votes&#x27;</span> =&gt; <span class="number">0</span>],</span><br><span class="line">  [<span class="string">&#x27;email&#x27;</span> =&gt; <span class="string">&#x27;dayle@example.com&#x27;</span>, <span class="string">&#x27;votes&#x27;</span> =&gt; <span class="number">0</span>]</span><br><span class="line">]);</span><br><span class="line"><span class="comment">// 更新</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)</span><br><span class="line">          -&gt;where(<span class="string">&#x27;id&#x27;</span>, <span class="number">1</span>)</span><br><span class="line">          -&gt;update([<span class="string">&#x27;votes&#x27;</span> =&gt; <span class="number">1</span>]);</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;increment(<span class="string">&#x27;votes&#x27;</span>);</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;increment(<span class="string">&#x27;votes&#x27;</span>, <span class="number">5</span>);</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;decrement(<span class="string">&#x27;votes&#x27;</span>);</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;decrement(<span class="string">&#x27;votes&#x27;</span>, <span class="number">5</span>);</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;increment(<span class="string">&#x27;votes&#x27;</span>, <span class="number">1</span>, [<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;John&#x27;</span>]);</span><br><span class="line"><span class="comment">// 删除</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;votes&#x27;</span>, <span class="string">&#x27;&lt;&#x27;</span>, <span class="number">100</span>)-&gt;delete();</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;delete();</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;truncate();</span><br><span class="line"><span class="comment">// 集合</span></span><br><span class="line"> <span class="comment">// unionAll() 方法也是可供使用的，调用方式与 union 相似</span></span><br><span class="line"><span class="variable">$first</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;whereNull(<span class="string">&#x27;first_name&#x27;</span>);</span><br><span class="line"><span class="variable">$users</span> = DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;whereNull(<span class="string">&#x27;last_name&#x27;</span>)-&gt;union(<span class="variable">$first</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 消极锁</span></span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;votes&#x27;</span>, <span class="string">&#x27;&gt;&#x27;</span>, <span class="number">100</span>)-&gt;sharedLock()-&gt;get();</span><br><span class="line">DB::table(<span class="string">&#x27;users&#x27;</span>)-&gt;where(<span class="string">&#x27;votes&#x27;</span>, <span class="string">&#x27;&gt;&#x27;</span>, <span class="number">100</span>)-&gt;lockForUpdate()-&gt;get();</span><br></pre></td></tr></table></figure>

<h2 id="Model"><a href="#Model" class="headerlink" title="Model"></a>Model</h2><h3 id="基础使用"><a href="#基础使用" class="headerlink" title="基础使用"></a>基础使用</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个 Eloquent 模型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;&#125;</span><br><span class="line"><span class="comment">// 生成一个 Eloquent 模型</span></span><br><span class="line">php artisan make:model User</span><br><span class="line"><span class="comment">// 生成一个 Eloquent 模型的时候，顺便生成迁移文件</span></span><br><span class="line">php artisan make:model User --migration <span class="keyword">OR</span> -m</span><br><span class="line"><span class="comment">// 生成一个 Eloquent 模型的时候，顺便生成迁移文件、控制器（或资源控制器）</span></span><br><span class="line">php artisan make:model User -mc[r]</span><br><span class="line"><span class="comment">// 指定一个自定义的数据表名称</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">extends</span> <span class="title">Model</span> </span>&#123;</span><br><span class="line">  <span class="keyword">protected</span> <span class="variable">$table</span> = <span class="string">&#x27;my_users&#x27;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="More"><a href="#More" class="headerlink" title="More"></a>More</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//新增一条新数据</span></span><br><span class="line">Model::create(<span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="comment">// 通过属性找到第一条相匹配的数据或创造一条新数据</span></span><br><span class="line">Model::firstOrCreate(<span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="comment">// 通过属性找到第一条相匹配的数据或实例化一条新数据</span></span><br><span class="line">Model::firstOrNew(<span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="comment">// 通过属性找到相匹配的数据并更新，如果不存在即创建</span></span><br><span class="line">Model::updateOrCreate(<span class="keyword">array</span>(<span class="string">&#x27;search_key&#x27;</span> =&gt; <span class="string">&#x27;search_value&#x27;</span>), <span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line"><span class="comment">// 使用属性的数组来填充一个模型, 用的时候要小心「Mass Assignment」安全问题 !</span></span><br><span class="line">Model::fill(<span class="variable">$attributes</span>);</span><br><span class="line">Model::destroy(<span class="number">1</span>);</span><br><span class="line">Model::all();</span><br><span class="line">Model::find(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 使用双主键进行查找</span></span><br><span class="line">Model::find(<span class="keyword">array</span>(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;last&#x27;</span>));</span><br><span class="line"><span class="comment">// 查找失败时抛出异常</span></span><br><span class="line">Model::findOrFail(<span class="number">1</span>);</span><br><span class="line"><span class="comment">// 使用双主键进行查找, 失败时抛出异常</span></span><br><span class="line">Model::findOrFail(<span class="keyword">array</span>(<span class="string">&#x27;first&#x27;</span>, <span class="string">&#x27;last&#x27;</span>));</span><br><span class="line">Model::where(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>)-&gt;get();</span><br><span class="line">Model::where(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>)-&gt;first();</span><br><span class="line">Model::where(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>)-&gt;exists();</span><br><span class="line"><span class="comment">// 动态属性查找</span></span><br><span class="line">Model::whereFoo(<span class="string">&#x27;bar&#x27;</span>)-&gt;first();</span><br><span class="line"><span class="comment">// 查找失败时抛出异常</span></span><br><span class="line">Model::where(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>)-&gt;firstOrFail();</span><br><span class="line">Model::where(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>)-&gt;count();</span><br><span class="line">Model::where(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>)-&gt;delete();</span><br><span class="line"><span class="comment">// 输出原始的查询语句</span></span><br><span class="line">Model::where(<span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;=&#x27;</span>, <span class="string">&#x27;bar&#x27;</span>)-&gt;toSql();</span><br><span class="line">Model::whereRaw(<span class="string">&#x27;foo = bar and cars = 2&#x27;</span>, <span class="keyword">array</span>(<span class="number">20</span>))-&gt;get();</span><br><span class="line">Model::on(<span class="string">&#x27;connection-name&#x27;</span>)-&gt;find(<span class="number">1</span>);</span><br><span class="line">Model::with(<span class="string">&#x27;relation&#x27;</span>)-&gt;get();</span><br><span class="line">Model::all()-&gt;take(<span class="number">10</span>);</span><br><span class="line">Model::all()-&gt;skip(<span class="number">10</span>);</span><br><span class="line"><span class="comment">// 默认的 Eloquent 排序是上升排序</span></span><br><span class="line">Model::all()-&gt;orderBy(<span class="string">&#x27;column&#x27;</span>);</span><br><span class="line">Model::all()-&gt;orderBy(<span class="string">&#x27;column&#x27;</span>,<span class="string">&#x27;desc&#x27;</span>);</span><br><span class="line"><span class="comment">// 查询 json 数据</span></span><br><span class="line">Model::where(<span class="string">&#x27;options-&gt;language&#x27;</span>, <span class="string">&#x27;en&#x27;</span>)-&gt;get(); <span class="comment"># 字段是字符串</span></span><br><span class="line">Model::whereJsonContains(<span class="string">&#x27;options-&gt;languages&#x27;</span>, <span class="string">&#x27;en&#x27;</span>)-&gt;get(); <span class="comment"># 字段是数组</span></span><br><span class="line">Model::whereJsonLength(<span class="string">&#x27;options-&gt;languages&#x27;</span>, <span class="number">0</span>)-&gt;get(); <span class="comment"># 字段长度为 0</span></span><br><span class="line">Model::whereJsonDoesntContain(<span class="string">&#x27;options-&gt;languages&#x27;</span>, <span class="string">&#x27;en&#x27;</span>)-&gt;get(); <span class="comment"># 字段是数组, 不包含</span></span><br></pre></td></tr></table></figure>

<h3 id="软删除"><a href="#软删除" class="headerlink" title="软删除"></a>软删除</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Model::withTrashed()-&gt;where(<span class="string">&#x27;cars&#x27;</span>, <span class="number">2</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 在查询结果中包括带被软删除的模型</span></span><br><span class="line">Model::withTrashed()-&gt;where(<span class="string">&#x27;cars&#x27;</span>, <span class="number">2</span>)-&gt;restore();</span><br><span class="line">Model::where(<span class="string">&#x27;cars&#x27;</span>, <span class="number">2</span>)-&gt;forceDelete();</span><br><span class="line"><span class="comment">// 查找只带有软删除的模型</span></span><br><span class="line">Model::onlyTrashed()-&gt;where(<span class="string">&#x27;cars&#x27;</span>, <span class="number">2</span>)-&gt;get();</span><br></pre></td></tr></table></figure>

<h3 id="模型关联"><a href="#模型关联" class="headerlink" title="模型关联"></a>模型关联</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 一对一 - User::phone()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;hasOne(<span class="string">&#x27;App\Phone&#x27;</span>, <span class="string">&#x27;foreign_key&#x27;</span>, <span class="string">&#x27;local_key&#x27;</span>);</span><br><span class="line"><span class="comment">// 一对一 - Phone::user(), 定义相对的关联</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsTo(<span class="string">&#x27;App\User&#x27;</span>, <span class="string">&#x27;foreign_key&#x27;</span>, <span class="string">&#x27;other_key&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 一对多 - Post::comments()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;hasMany(<span class="string">&#x27;App\Comment&#x27;</span>, <span class="string">&#x27;foreign_key&#x27;</span>, <span class="string">&#x27;local_key&#x27;</span>);</span><br><span class="line"><span class="comment">//  一对多 - Comment::post()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsTo(<span class="string">&#x27;App\Post&#x27;</span>, <span class="string">&#x27;foreign_key&#x27;</span>, <span class="string">&#x27;other_key&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多对多 - User::roles();</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsToMany(<span class="string">&#x27;App\Role&#x27;</span>, <span class="string">&#x27;user_roles&#x27;</span>, <span class="string">&#x27;user_id&#x27;</span>, <span class="string">&#x27;role_id&#x27;</span>);</span><br><span class="line"><span class="comment">// 多对多 - Role::users();</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsToMany(<span class="string">&#x27;App\User&#x27;</span>);</span><br><span class="line"><span class="comment">// 多对多 - Retrieving Intermediate Table Columns</span></span><br><span class="line"><span class="variable">$role</span>-&gt;pivot-&gt;created_at;</span><br><span class="line"><span class="comment">// 多对多 - 中介表字段</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsToMany(<span class="string">&#x27;App\Role&#x27;</span>)-&gt;withPivot(<span class="string">&#x27;column1&#x27;</span>, <span class="string">&#x27;column2&#x27;</span>);</span><br><span class="line"><span class="comment">// 多对多 - 自动维护 created_at 和 updated_at 时间戳</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;belongsToMany(<span class="string">&#x27;App\Role&#x27;</span>)-&gt;withTimestamps();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 远层一对多 - Country::posts(), 一个 Country 模型可能通过中介的 Users</span></span><br><span class="line"><span class="comment">// 模型关联到多个 Posts 模型(User::country_id)</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;hasManyThrough(<span class="string">&#x27;App\Post&#x27;</span>, <span class="string">&#x27;App\User&#x27;</span>, <span class="string">&#x27;country_id&#x27;</span>, <span class="string">&#x27;user_id&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多态关联 - Photo::imageable()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;morphTo();</span><br><span class="line"><span class="comment">// 多态关联 - Staff::photos()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;morphMany(<span class="string">&#x27;App\Photo&#x27;</span>, <span class="string">&#x27;imageable&#x27;</span>);</span><br><span class="line"><span class="comment">// 多态关联 - Product::photos()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;morphMany(<span class="string">&#x27;App\Photo&#x27;</span>, <span class="string">&#x27;imageable&#x27;</span>);</span><br><span class="line"><span class="comment">// 多态关联 - 在 AppServiceProvider 中注册你的「多态对照表」</span></span><br><span class="line">Relation::morphMap([</span><br><span class="line">    <span class="string">&#x27;Post&#x27;</span> =&gt; App\Post::class,</span><br><span class="line">    <span class="string">&#x27;Comment&#x27;</span> =&gt; App\Comment::class,</span><br><span class="line">]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 多态多对多关联 - 涉及数据库表: posts,videos,tags,taggables</span></span><br><span class="line"><span class="comment">// Post::tags()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;morphToMany(<span class="string">&#x27;App\Tag&#x27;</span>, <span class="string">&#x27;taggable&#x27;</span>);</span><br><span class="line"><span class="comment">// Video::tags()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;morphToMany(<span class="string">&#x27;App\Tag&#x27;</span>, <span class="string">&#x27;taggable&#x27;</span>);</span><br><span class="line"><span class="comment">// Tag::posts()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;morphedByMany(<span class="string">&#x27;App\Post&#x27;</span>, <span class="string">&#x27;taggable&#x27;</span>);</span><br><span class="line"><span class="comment">// Tag::videos()</span></span><br><span class="line"><span class="keyword">return</span> <span class="keyword">$this</span>-&gt;morphedByMany(<span class="string">&#x27;App\Video&#x27;</span>, <span class="string">&#x27;taggable&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 查找关联</span></span><br><span class="line"><span class="variable">$user</span>-&gt;posts()-&gt;where(<span class="string">&#x27;active&#x27;</span>, <span class="number">1</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 获取所有至少有一篇评论的文章...</span></span><br><span class="line"><span class="variable">$posts</span> = App\Post::has(<span class="string">&#x27;comments&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 获取所有至少有三篇评论的文章...</span></span><br><span class="line"><span class="variable">$posts</span> = Post::has(<span class="string">&#x27;comments&#x27;</span>, <span class="string">&#x27;&gt;=&#x27;</span>, <span class="number">3</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 获取所有至少有一篇评论被评分的文章...</span></span><br><span class="line"><span class="variable">$posts</span> = Post::has(<span class="string">&#x27;comments.votes&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="comment">// 获取所有至少有一篇评论相似于 foo% 的文章</span></span><br><span class="line"><span class="variable">$posts</span> = Post::whereHas(<span class="string">&#x27;comments&#x27;</span>, <span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$query</span></span>) </span>&#123;</span><br><span class="line">    <span class="variable">$query</span>-&gt;where(<span class="string">&#x27;content&#x27;</span>, <span class="string">&#x27;like&#x27;</span>, <span class="string">&#x27;foo%&#x27;</span>);</span><br><span class="line">&#125;)-&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 预加载</span></span><br><span class="line"><span class="variable">$books</span> = App\Book::with(<span class="string">&#x27;author&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="variable">$books</span> = App\Book::with(<span class="string">&#x27;author&#x27;</span>, <span class="string">&#x27;publisher&#x27;</span>)-&gt;get();</span><br><span class="line"><span class="variable">$books</span> = App\Book::with(<span class="string">&#x27;author.contacts&#x27;</span>)-&gt;get();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 延迟预加载</span></span><br><span class="line"><span class="variable">$books</span>-&gt;load(<span class="string">&#x27;author&#x27;</span>, <span class="string">&#x27;publisher&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 写入关联模型</span></span><br><span class="line"><span class="variable">$comment</span> = <span class="keyword">new</span> App\Comment([<span class="string">&#x27;message&#x27;</span> =&gt; <span class="string">&#x27;A new comment.&#x27;</span>]);</span><br><span class="line"><span class="variable">$post</span>-&gt;comments()-&gt;save(<span class="variable">$comment</span>);</span><br><span class="line"><span class="comment">// Save 与多对多关联</span></span><br><span class="line"><span class="variable">$post</span>-&gt;comments()-&gt;saveMany([</span><br><span class="line">    <span class="keyword">new</span> App\Comment([<span class="string">&#x27;message&#x27;</span> =&gt; <span class="string">&#x27;A new comment.&#x27;</span>]),</span><br><span class="line">    <span class="keyword">new</span> App\Comment([<span class="string">&#x27;message&#x27;</span> =&gt; <span class="string">&#x27;Another comment.&#x27;</span>]),</span><br><span class="line">]);</span><br><span class="line"><span class="variable">$post</span>-&gt;comments()-&gt;create([<span class="string">&#x27;message&#x27;</span> =&gt; <span class="string">&#x27;A new comment.&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新「从属」关联</span></span><br><span class="line"><span class="variable">$user</span>-&gt;account()-&gt;associate(<span class="variable">$account</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;save();</span><br><span class="line"><span class="variable">$user</span>-&gt;account()-&gt;dissociate();</span><br><span class="line"><span class="variable">$user</span>-&gt;save();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 附加多对多关系</span></span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;attach(<span class="variable">$roleId</span>);</span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;attach(<span class="variable">$roleId</span>, [<span class="string">&#x27;expires&#x27;</span> =&gt; <span class="variable">$expires</span>]);</span><br><span class="line"><span class="comment">// 从用户上移除单一身份...</span></span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;detach(<span class="variable">$roleId</span>);</span><br><span class="line"><span class="comment">// 从用户上移除所有身份...</span></span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;detach();</span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;detach([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;attach([<span class="number">1</span> =&gt; [<span class="string">&#x27;expires&#x27;</span> =&gt; <span class="variable">$expires</span>], <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 任何不在给定数组中的 IDs 将会从中介表中被删除。</span></span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;sync([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="comment">// 你也可以传递中介表上该 IDs 额外的值：</span></span><br><span class="line"><span class="variable">$user</span>-&gt;roles()-&gt;sync([<span class="number">1</span> =&gt; [<span class="string">&#x27;expires&#x27;</span> =&gt; <span class="literal">true</span>], <span class="number">2</span>, <span class="number">3</span>]);</span><br></pre></td></tr></table></figure>

<h3 id="事件"><a href="#事件" class="headerlink" title="事件"></a>事件</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Model::retrieved(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::creating(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::created(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::updating(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::updated(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::saving(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::saved(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::deleting(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::deleted(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::restoring(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::restored(<span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$model</span></span>)</span>&#123;&#125;);</span><br><span class="line">Model::observe(<span class="keyword">new</span> FooObserver);</span><br></pre></td></tr></table></figure>

<h3 id="Eloquent-配置信息"><a href="#Eloquent-配置信息" class="headerlink" title="Eloquent 配置信息"></a>Eloquent 配置信息</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 关闭模型插入或更新操作引发的 「mass assignment」异常</span></span><br><span class="line">Eloquent::unguard();</span><br><span class="line"><span class="comment">// 重新开启「mass assignment」异常抛出功能</span></span><br><span class="line">Eloquent::reguard();</span><br></pre></td></tr></table></figure>

<h2 id="Pagination"><a href="#Pagination" class="headerlink" title="Pagination"></a>Pagination</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 自动处理分页逻辑</span></span><br><span class="line">Model::paginate(<span class="number">15</span>);</span><br><span class="line">Model::where(<span class="string">&#x27;cars&#x27;</span>, <span class="number">2</span>)-&gt;paginate(<span class="number">15</span>);</span><br><span class="line"><span class="comment">// 使用简单模板 - 只有 &quot;上一页&quot; 或 &quot;下一页&quot; 链接</span></span><br><span class="line">Model::where(<span class="string">&#x27;cars&#x27;</span>, <span class="number">2</span>)-&gt;simplePaginate(<span class="number">15</span>);</span><br><span class="line"><span class="comment">// 手动分页</span></span><br><span class="line">Paginator::make(<span class="variable">$items</span>, <span class="variable">$totalItems</span>, <span class="variable">$perPage</span>);</span><br><span class="line"><span class="comment">// 在页面打印分页导航栏</span></span><br><span class="line"><span class="variable">$variable</span>-&gt;links();</span><br><span class="line"></span><br><span class="line"><span class="comment">// 获取当前页数据数量。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;count()</span><br><span class="line"><span class="comment">// 获取当前页页码。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;currentPage()</span><br><span class="line"><span class="comment">// 获取结果集中第一条数据的结果编号。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;firstItem()</span><br><span class="line"><span class="comment">// 获取分页器选项。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;getOptions()</span><br><span class="line"><span class="comment">// 创建分页 URL 范围。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;getUrlRange(<span class="variable">$start</span>, <span class="variable">$end</span>)</span><br><span class="line"><span class="comment">// 是否有多页。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;hasMorePages()</span><br><span class="line"><span class="comment">// 获取结果集中最后一条数据的结果编号。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;lastItem()</span><br><span class="line"><span class="comment">// 获取最后一页的页码（在 `simplePaginate` 中无效）。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;lastPage()</span><br><span class="line"><span class="comment">// 获取下一页的 URL 。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;nextPageUrl()</span><br><span class="line"><span class="comment">// 当前而是否为第一页。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;onFirstPage()</span><br><span class="line"><span class="comment">// 每页的数据条数。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;perPage()</span><br><span class="line"><span class="comment">// 获取前一页的 URL。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;previousPageUrl()</span><br><span class="line"><span class="comment">// 数据总数（在 `simplePaginate` 无效）。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;total()</span><br><span class="line"><span class="comment">// 获取指定页的 URL。</span></span><br><span class="line"><span class="variable">$results</span>-&gt;url(<span class="variable">$page</span>)</span><br></pre></td></tr></table></figure>

<h2 id="UnitTest"><a href="#UnitTest" class="headerlink" title="UnitTest"></a>UnitTest</h2><h3 id="安装和运行"><a href="#安装和运行" class="headerlink" title="安装和运行"></a>安装和运行</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将其加入到 composer.json 并更新:</span></span><br><span class="line">composer <span class="keyword">require</span> <span class="string">&quot;phpunit/phpunit:4.0.*&quot;</span></span><br><span class="line"><span class="comment">// 运行测试 (在项目根目录下运行)</span></span><br><span class="line">./vendor/bin/phpunit</span><br></pre></td></tr></table></figure>

<h3 id="断言"><a href="#断言" class="headerlink" title="断言"></a>断言</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">$this</span>-&gt;assertTrue(<span class="literal">true</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertEquals(<span class="string">&#x27;foo&#x27;</span>, <span class="variable">$bar</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertCount(<span class="number">1</span>,<span class="variable">$times</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertResponseOk();</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertResponseStatus(<span class="number">403</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertRedirectedTo(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertRedirectedToRoute(<span class="string">&#x27;route.name&#x27;</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertRedirectedToAction(<span class="string">&#x27;Controller@method&#x27;</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertViewHas(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertViewHas(<span class="string">&#x27;age&#x27;</span>, <span class="variable">$value</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertSessionHasErrors();</span><br><span class="line"><span class="comment">// 由单个 key 值来假定 session 有错误...</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;assertSessionHasErrors(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="comment">// 由多个 key 值来假定 session 有错误...</span></span><br><span class="line"><span class="keyword">$this</span>-&gt;assertSessionHasErrors(<span class="keyword">array</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>));</span><br><span class="line"><span class="keyword">$this</span>-&gt;assertHasOldInput();</span><br></pre></td></tr></table></figure>

<h3 id="访问路由"><a href="#访问路由" class="headerlink" title="访问路由"></a>访问路由</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$response</span> = <span class="keyword">$this</span>-&gt;call(<span class="variable">$method</span>, <span class="variable">$uri</span>, <span class="variable">$parameters</span>, <span class="variable">$files</span>, <span class="variable">$server</span>, <span class="variable">$content</span>);</span><br><span class="line"><span class="variable">$response</span> = <span class="keyword">$this</span>-&gt;callSecure(<span class="string">&#x27;GET&#x27;</span>, <span class="string">&#x27;foo/bar&#x27;</span>);</span><br><span class="line"><span class="keyword">$this</span>-&gt;session([<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="string">&#x27;bar&#x27;</span>]);</span><br><span class="line"><span class="keyword">$this</span>-&gt;flushSession();</span><br><span class="line"><span class="keyword">$this</span>-&gt;seed();</span><br><span class="line"><span class="keyword">$this</span>-&gt;seed(<span class="variable">$connection</span>);</span><br></pre></td></tr></table></figure>

<h2 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 创建集合</span></span><br><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]);</span><br><span class="line"><span class="comment">// 返回该集合所代表的底层数组：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;all();</span><br><span class="line"><span class="comment">// 返回集合中所有项目的平均值：</span></span><br><span class="line">collect([<span class="number">1</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">4</span>])-&gt;avg() <span class="comment">// 2</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;average();</span><br><span class="line"><span class="comment">// 将集合拆成多个给定大小的较小集合：</span></span><br><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;chunk(<span class="number">2</span>); <span class="comment">// [[1,2], [3,4], [5]]</span></span><br><span class="line"><span class="comment">// 将多个数组组成的集合折成单一数组集合：</span></span><br><span class="line">collect([[<span class="number">1</span>],  [<span class="number">4</span>,  <span class="number">5</span>]])-&gt;collapse(); <span class="comment">// [1, 4, 5]</span></span><br><span class="line"><span class="comment">// 将一个集合的值作为键，再将另一个集合作为值合并成一个集合</span></span><br><span class="line">collect([<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;age&#x27;</span>])-&gt;combine([<span class="string">&#x27;George&#x27;</span>, <span class="number">29</span>]);</span><br><span class="line"><span class="comment">// 将给定的 数组 或集合值追加到集合的末尾</span></span><br><span class="line">collect([<span class="string">&#x27;PHP&#x27;</span>])-&gt;concat([<span class="string">&#x27;Laravel&#x27;</span>]); <span class="comment">// [&#x27;PHP&#x27;, &#x27;Laravel&#x27;]</span></span><br><span class="line"><span class="comment">// 用来判断该集合是否含有指定的项目：</span></span><br><span class="line">collect([<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Desk&#x27;</span>])-&gt;contains(<span class="string">&#x27;Desk&#x27;</span>); <span class="comment">// true</span></span><br><span class="line">collect([<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Desk&#x27;</span>])-&gt;contains(<span class="string">&#x27;name&#x27;</span>,  <span class="string">&#x27;Desk&#x27;</span>); <span class="comment">// true</span></span><br><span class="line"><span class="comment">// 返回该集合内的项目总数：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;count();</span><br><span class="line"><span class="comment">// 交叉连接指定数组或集合的值，返回所有可能排列的笛卡尔积</span></span><br><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>])-&gt;crossJoin([<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>]); <span class="comment">// [[1, &#x27;a&#x27;],[1, &#x27;b&#x27;],[2, &#x27;a&#x27;],[2, &#x27;b&#x27;]]</span></span><br><span class="line"><span class="comment">// dd($collection) 的另一个写法</span></span><br><span class="line">collect([<span class="string">&#x27;John Doe&#x27;</span>, <span class="string">&#x27;Jane Doe&#x27;</span>])-&gt;dd();</span><br><span class="line"><span class="comment">// 返回原集合中存在而指定集合中不存在的值</span></span><br><span class="line">collect([<span class="number">1</span>,  <span class="number">2</span>,  <span class="number">3</span>])-&gt;diff([<span class="number">2</span>, <span class="number">4</span>]); <span class="comment">// [1, 3]</span></span><br><span class="line"><span class="comment">// 返回原集合不存在与指定集合的键 / 值对</span></span><br><span class="line">collect([<span class="string">&#x27;color&#x27;</span> =&gt; <span class="string">&#x27;orange&#x27;</span>, <span class="string">&#x27;remain&#x27;</span> =&gt;  <span class="number">6</span>])-&gt;diffAssoc([<span class="string">&#x27;color&#x27;</span> =&gt; <span class="string">&#x27;yellow&#x27;</span>, <span class="string">&#x27;remain&#x27;</span> =&gt; <span class="number">6</span>, <span class="string">&#x27;used&#x27;</span> =&gt; <span class="number">6</span>]);  <span class="comment">// [&#x27;color&#x27; =&gt; &#x27;orange&#x27;]</span></span><br><span class="line"><span class="comment">// 返回原集合中存在而指定集合中不存在键所对应的键 / 值对</span></span><br><span class="line">collect([<span class="string">&#x27;one&#x27;</span> =&gt; <span class="number">10</span>, <span class="string">&#x27;two&#x27;</span> =&gt; <span class="number">20</span>])-&gt;diffKeys([<span class="string">&#x27;two&#x27;</span> =&gt; <span class="number">2</span>, <span class="string">&#x27;four&#x27;</span> =&gt; <span class="number">4</span>]); <span class="comment">// [&#x27;one&#x27; =&gt; 10]</span></span><br><span class="line"><span class="comment">// 类似于 dd() 方法，但是不会中断</span></span><br><span class="line">collect([<span class="string">&#x27;John Doe&#x27;</span>, <span class="string">&#x27;Jane Doe&#x27;</span>])-&gt;dump();</span><br><span class="line"><span class="comment">// 遍历集合中的项目，并将之传入给定的回调函数：</span></span><br><span class="line"><span class="variable">$collection</span> = <span class="variable">$collection</span>-&gt;each(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$item</span>, <span class="variable">$key</span></span>) </span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 验证集合中的每一个元素是否通过指定的条件测试</span></span><br><span class="line">collect([<span class="number">1</span>,  <span class="number">2</span>])-&gt;every(<span class="function"><span class="keyword">function</span>  (<span class="params"><span class="variable">$value</span>,  <span class="variable">$key</span></span>)  </span>&#123; <span class="keyword">return</span> <span class="variable">$value</span> &gt; <span class="number">1</span>; &#125;); <span class="comment">// false</span></span><br><span class="line"><span class="comment">// 返回集合中排除指定键的所有项目：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;except([<span class="string">&#x27;price&#x27;</span>, <span class="string">&#x27;discount&#x27;</span>]);</span><br><span class="line"><span class="comment">// 以给定的回调函数筛选集合，只留下那些通过判断测试的项目：</span></span><br><span class="line"><span class="variable">$filtered</span> = <span class="variable">$collection</span>-&gt;filter(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$item</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$item</span> &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 返回集合中，第一个通过给定测试的元素：</span></span><br><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>])-&gt;first(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$key</span>, <span class="variable">$value</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$value</span> &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 将多维集合转为一维集合：</span></span><br><span class="line"><span class="variable">$flattened</span> = <span class="variable">$collection</span>-&gt;flatten();</span><br><span class="line"><span class="comment">// 将集合中的键和对应的数值进行互换：</span></span><br><span class="line"><span class="variable">$flipped</span> = <span class="variable">$collection</span>-&gt;flip();</span><br><span class="line"><span class="comment">// 以键自集合移除掉一个项目：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;forget(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="comment">// 返回含有可以用来在给定页码显示项目的新集合：</span></span><br><span class="line"><span class="variable">$chunk</span> = <span class="variable">$collection</span>-&gt;forPage(<span class="number">2</span>, <span class="number">3</span>);</span><br><span class="line"><span class="comment">// 返回给定键的项目。如果该键不存在，则返回 null：</span></span><br><span class="line"><span class="variable">$value</span> = <span class="variable">$collection</span>-&gt;get(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="comment">// 根据给定的键替集合内的项目分组：</span></span><br><span class="line"><span class="variable">$grouped</span> = <span class="variable">$collection</span>-&gt;groupBy(<span class="string">&#x27;account_id&#x27;</span>);</span><br><span class="line"><span class="comment">// 用来确认集合中是否含有给定的键：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;has(<span class="string">&#x27;email&#x27;</span>);</span><br><span class="line"><span class="comment">// 用来连接集合中的项目</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;implode(<span class="string">&#x27;product&#x27;</span>, <span class="string">&#x27;, &#x27;</span>);</span><br><span class="line"><span class="comment">// 移除任何给定数组或集合内所没有的数值：</span></span><br><span class="line"><span class="variable">$intersect</span> = <span class="variable">$collection</span>-&gt;intersect([<span class="string">&#x27;Desk&#x27;</span>, <span class="string">&#x27;Chair&#x27;</span>, <span class="string">&#x27;Bookcase&#x27;</span>]);</span><br><span class="line"><span class="comment">// 假如集合是空的，isEmpty 方法会返回 true：</span></span><br><span class="line">collect([])-&gt;isEmpty();</span><br><span class="line"><span class="comment">// 以给定键的值作为集合项目的键：</span></span><br><span class="line"><span class="variable">$keyed</span> = <span class="variable">$collection</span>-&gt;keyBy(<span class="string">&#x27;product_id&#x27;</span>);</span><br><span class="line"><span class="comment">// 传入回调函数，该函数会返回集合的键的值：</span></span><br><span class="line"><span class="variable">$keyed</span> = <span class="variable">$collection</span>-&gt;keyBy(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$item</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> strtoupper(<span class="variable">$item</span>[<span class="string">&#x27;product_id&#x27;</span>]);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 返回该集合所有的键：</span></span><br><span class="line"><span class="variable">$keys</span> = <span class="variable">$collection</span>-&gt;keys();</span><br><span class="line"><span class="comment">// 返回集合中，最后一个通过给定测试的元素：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;last();</span><br><span class="line"><span class="comment">// 遍历整个集合并将每一个数值传入给定的回调函数：</span></span><br><span class="line"><span class="variable">$multiplied</span> = <span class="variable">$collection</span>-&gt;map(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$item</span>, <span class="variable">$key</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$item</span> * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 返回给定键的最大值：</span></span><br><span class="line"><span class="variable">$max</span> = collect([[<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="number">10</span>], [<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="number">20</span>]])-&gt;max(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"><span class="variable">$max</span> = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;max();</span><br><span class="line"><span class="comment">// 将合并指定的数组或集合到原集合：</span></span><br><span class="line"><span class="variable">$merged</span> = <span class="variable">$collection</span>-&gt;merge([<span class="string">&#x27;price&#x27;</span> =&gt; <span class="number">100</span>, <span class="string">&#x27;discount&#x27;</span> =&gt; <span class="literal">false</span>]);</span><br><span class="line"><span class="comment">// 返回给定键的最小值：</span></span><br><span class="line"><span class="variable">$min</span> = collect([[<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="number">10</span>], [<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="number">20</span>]])-&gt;min(<span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line"><span class="variable">$min</span> = collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;min();</span><br><span class="line"><span class="comment">// 返回集合中指定键的所有项目：</span></span><br><span class="line"><span class="variable">$filtered</span> = <span class="variable">$collection</span>-&gt;only([<span class="string">&#x27;product_id&#x27;</span>, <span class="string">&#x27;name&#x27;</span>]);</span><br><span class="line"><span class="comment">// 获取所有集合中给定键的值：</span></span><br><span class="line"><span class="variable">$plucked</span> = <span class="variable">$collection</span>-&gt;pluck(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="comment">// 移除并返回集合最后一个项目：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;pop();</span><br><span class="line"><span class="comment">// 在集合前面增加一个项目：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;prepend(<span class="number">0</span>);</span><br><span class="line"><span class="comment">// 传递第二个参数来设置前置项目的键：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;prepend(<span class="number">0</span>, <span class="string">&#x27;zero&#x27;</span>);</span><br><span class="line"><span class="comment">// 以键从集合中移除并返回一个项目：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;pull(<span class="string">&#x27;name&#x27;</span>);</span><br><span class="line"><span class="comment">// 附加一个项目到集合后面：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;push(<span class="number">5</span>);</span><br><span class="line"><span class="comment">// put 在集合内设置一个给定键和数值：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;put(<span class="string">&#x27;price&#x27;</span>, <span class="number">100</span>);</span><br><span class="line"><span class="comment">// 从集合中随机返回一个项目：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;random();</span><br><span class="line"><span class="comment">// 传入一个整数到 random。如果该整数大于 1，则会返回一个集合：</span></span><br><span class="line"><span class="variable">$random</span> = <span class="variable">$collection</span>-&gt;random(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// 会将每次迭代的结果传入到下一次迭代：</span></span><br><span class="line"><span class="variable">$total</span> = <span class="variable">$collection</span>-&gt;reduce(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$carry</span>, <span class="variable">$item</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$carry</span> + <span class="variable">$item</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 以给定的回调函数筛选集合：</span></span><br><span class="line"><span class="variable">$filtered</span> = <span class="variable">$collection</span>-&gt;reject(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$item</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$item</span> &gt; <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 反转集合内项目的顺序：</span></span><br><span class="line"><span class="variable">$reversed</span> = <span class="variable">$collection</span>-&gt;reverse();</span><br><span class="line"><span class="comment">// 在集合内搜索给定的数值并返回找到的键：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;search(<span class="number">4</span>);</span><br><span class="line"><span class="comment">// 移除并返回集合的第一个项目：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;shift();</span><br><span class="line"><span class="comment">// 随机排序集合的项目：</span></span><br><span class="line"><span class="variable">$shuffled</span> = <span class="variable">$collection</span>-&gt;shuffle();</span><br><span class="line"><span class="comment">// 返回集合从给定索引开始的一部分切片：</span></span><br><span class="line"><span class="variable">$slice</span> = <span class="variable">$collection</span>-&gt;slice(<span class="number">4</span>);</span><br><span class="line"><span class="comment">// 对集合排序：</span></span><br><span class="line"><span class="variable">$sorted</span> = <span class="variable">$collection</span>-&gt;sort();</span><br><span class="line"><span class="comment">// 以给定的键排序集合：</span></span><br><span class="line"><span class="variable">$sorted</span> = <span class="variable">$collection</span>-&gt;sortBy(<span class="string">&#x27;price&#x27;</span>);</span><br><span class="line"><span class="comment">// 移除并返回从指定的索引开始的一小切片项目：</span></span><br><span class="line"><span class="variable">$chunk</span> = <span class="variable">$collection</span>-&gt;splice(<span class="number">2</span>);</span><br><span class="line"><span class="comment">// 返回集合内所有项目的总和：</span></span><br><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>])-&gt;sum();</span><br><span class="line"><span class="comment">// 返回有着指定数量项目的集合：</span></span><br><span class="line"><span class="variable">$chunk</span> = <span class="variable">$collection</span>-&gt;take(<span class="number">3</span>);</span><br><span class="line"><span class="comment">// 将集合转换成纯 PHP 数组：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;toArray();</span><br><span class="line"><span class="comment">// 将集合转换成 JSON：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;toJson();</span><br><span class="line"><span class="comment">// 遍历集合并对集合内每一个项目调用给定的回调函数：</span></span><br><span class="line"><span class="variable">$collection</span>-&gt;transform(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$item</span>, <span class="variable">$key</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$item</span> * <span class="number">2</span>;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 返回集合中所有唯一的项目：</span></span><br><span class="line"><span class="variable">$unique</span> = <span class="variable">$collection</span>-&gt;unique();</span><br><span class="line"><span class="comment">// 返回键重设为连续整数的的新集合：</span></span><br><span class="line"><span class="variable">$values</span> = <span class="variable">$collection</span>-&gt;values();</span><br><span class="line"><span class="comment">// 以一对给定的键／数值筛选集合：</span></span><br><span class="line"><span class="variable">$filtered</span> = <span class="variable">$collection</span>-&gt;where(<span class="string">&#x27;price&#x27;</span>, <span class="number">100</span>);</span><br><span class="line"><span class="comment">// 将集合与给定数组同样索引的值合并在一起：</span></span><br><span class="line"><span class="variable">$zipped</span> = <span class="variable">$collection</span>-&gt;zip([<span class="number">100</span>, <span class="number">200</span>]);</span><br><span class="line"><span class="comment">//把集合放到回调参数中并返回回调的结果:</span></span><br><span class="line">collect([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])-&gt;pipe(<span class="function"><span class="keyword">function</span> (<span class="params"><span class="variable">$collection</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="variable">$collection</span>-&gt;sum();</span><br><span class="line">&#125;);<span class="comment">//6</span></span><br></pre></td></tr></table></figure>

<h2 id="String"><a href="#String" class="headerlink" title="String"></a>String</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将 UTF-8 的值直译为 ASCII 类型的值</span></span><br><span class="line">Str::ascii(<span class="variable">$value</span>)</span><br><span class="line">Str::camel(<span class="variable">$value</span>)</span><br><span class="line">Str::contains(<span class="variable">$haystack</span>, <span class="variable">$needle</span>)</span><br><span class="line">Str::endsWith(<span class="variable">$haystack</span>, <span class="variable">$needles</span>)</span><br><span class="line">Str::finish(<span class="variable">$value</span>, <span class="variable">$cap</span>)</span><br><span class="line">Str::is(<span class="variable">$pattern</span>, <span class="variable">$value</span>)</span><br><span class="line">Str::length(<span class="variable">$value</span>)</span><br><span class="line">Str::limit(<span class="variable">$value</span>, <span class="variable">$limit</span> = <span class="number">100</span>, <span class="variable">$end</span> = <span class="string">&#x27;...&#x27;</span>)</span><br><span class="line">Str::lower(<span class="variable">$value</span>)</span><br><span class="line">Str::words(<span class="variable">$value</span>, <span class="variable">$words</span> = <span class="number">100</span>, <span class="variable">$end</span> = <span class="string">&#x27;...&#x27;</span>)</span><br><span class="line">Str::plural(<span class="variable">$value</span>, <span class="variable">$count</span> = <span class="number">2</span>)</span><br><span class="line"><span class="comment">// 生成更加真实的 &quot;随机&quot; 字母数字字符串.</span></span><br><span class="line">Str::random(<span class="variable">$length</span> = <span class="number">16</span>)</span><br><span class="line"><span class="comment">// 生成一个 &quot;随机&quot; 字母数字字符串.</span></span><br><span class="line">Str::quickRandom(<span class="variable">$length</span> = <span class="number">16</span>)</span><br><span class="line">Str::upper(<span class="variable">$value</span>)</span><br><span class="line">Str::title(<span class="variable">$value</span>)</span><br><span class="line">Str::singular(<span class="variable">$value</span>)</span><br><span class="line">Str::slug(<span class="variable">$title</span>, <span class="variable">$separator</span> = <span class="string">&#x27;-&#x27;</span>)</span><br><span class="line">Str::snake(<span class="variable">$value</span>, <span class="variable">$delimiter</span> = <span class="string">&#x27;_&#x27;</span>)</span><br><span class="line">Str::startsWith(<span class="variable">$haystack</span>, <span class="variable">$needles</span>)</span><br><span class="line">Str::studly(<span class="variable">$value</span>)</span><br><span class="line">Str::macro(<span class="variable">$name</span>, <span class="variable">$macro</span>)</span><br></pre></td></tr></table></figure>

<h2 id="Helper"><a href="#Helper" class="headerlink" title="Helper"></a>Helper</h2><p>注：数组和字符串函数将在 5.9 全面废弃，推荐使用 Arr 和 Str Facade</p>
<h3 id="数组-amp-对象"><a href="#数组-amp-对象" class="headerlink" title="数组 &amp; 对象"></a>数组 &amp; 对象</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 如果给定的键不存在于该数组，Arr::add 函数将给定的键值对加到数组中</span></span><br><span class="line">Arr::add([<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Desk&#x27;</span>], <span class="string">&#x27;price&#x27;</span>, <span class="number">100</span>); </span><br><span class="line"><span class="comment">// &gt;&gt;&gt; [&#x27;name&#x27; =&gt; &#x27;Desk&#x27;, &#x27;price&#x27; =&gt; 100]</span></span><br><span class="line"><span class="comment">// 将数组的每一个数组折成单一数组</span></span><br><span class="line">Arr::collapse([[<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">4</span>, <span class="number">5</span>, <span class="number">6</span>]]);  </span><br><span class="line"><span class="comment">// &gt;&gt;&gt; [1, 2, 3, 4, 5, 6]</span></span><br><span class="line"><span class="comment">// 函数返回两个数组，一个包含原本数组的键，另一个包含原本数组的值</span></span><br><span class="line">Arr::divide([<span class="string">&#x27;key1&#x27;</span> =&gt; <span class="string">&#x27;val1&#x27;</span>, <span class="string">&#x27;key2&#x27;</span> =&gt;<span class="string">&#x27;val2&#x27;</span>])</span><br><span class="line"><span class="comment">// &gt;&gt;&gt; [[&quot;key1&quot;,&quot;key2&quot;],[&quot;val1&quot;,&quot;val2&quot;]]</span></span><br><span class="line"><span class="comment">// 把多维数组扁平化成一维数组，并用「点」式语法表示深度</span></span><br><span class="line">Arr::dot(<span class="variable">$array</span>);</span><br><span class="line"><span class="comment">// 从数组移除给定的键值对</span></span><br><span class="line">Arr::except(<span class="variable">$array</span>, <span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span>));</span><br><span class="line"><span class="comment">// 返回数组中第一个通过真值测试的元素</span></span><br><span class="line">Arr::first(<span class="variable">$array</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$value</span>, <span class="variable">$key</span></span>)</span>&#123;&#125;, <span class="variable">$default</span>);</span><br><span class="line"><span class="comment">// 将多维数组扁平化成一维</span></span><br><span class="line"> <span class="comment">// [&#x27;Joe&#x27;, &#x27;PHP&#x27;, &#x27;Ruby&#x27;];</span></span><br><span class="line">Arr::flatten([<span class="string">&#x27;name&#x27;</span> =&gt; <span class="string">&#x27;Joe&#x27;</span>, <span class="string">&#x27;languages&#x27;</span> =&gt; [<span class="string">&#x27;PHP&#x27;</span>, <span class="string">&#x27;Ruby&#x27;</span>]]);</span><br><span class="line"><span class="comment">// 以「点」式语法从深度嵌套数组移除给定的键值对</span></span><br><span class="line">Arr::forget(<span class="variable">$array</span>, <span class="string">&#x27;foo&#x27;</span>);</span><br><span class="line">Arr::forget(<span class="variable">$array</span>, <span class="string">&#x27;foo.bar&#x27;</span>);</span><br><span class="line"><span class="comment">// 使用「点」式语法从深度嵌套数组取回给定的值</span></span><br><span class="line">Arr::get(<span class="variable">$array</span>, <span class="string">&#x27;foo&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line">Arr::get(<span class="variable">$array</span>, <span class="string">&#x27;foo.bar&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line"><span class="comment">// 使用「点」式语法检查给定的项目是否存在于数组中</span></span><br><span class="line">Arr::has(<span class="variable">$array</span>, <span class="string">&#x27;products.desk&#x27;</span>);</span><br><span class="line"><span class="comment">// 从数组返回给定的键值对</span></span><br><span class="line">Arr::only(<span class="variable">$array</span>, <span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span>));</span><br><span class="line"><span class="comment">// 从数组拉出一列给定的键值对</span></span><br><span class="line">Arr::pluck(<span class="variable">$array</span>, <span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 从数组移除并返回给定的键值对</span></span><br><span class="line">Arr::pull(<span class="variable">$array</span>, <span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 使用「点」式语法在深度嵌套数组中写入值</span></span><br><span class="line">Arr::set(<span class="variable">$array</span>, <span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line">Arr::set(<span class="variable">$array</span>, <span class="string">&#x27;key.subkey&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="comment">// 借由给定闭包结果排序数组</span></span><br><span class="line">Arr::sort(<span class="variable">$array</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 使用 sort 函数递归排序数组</span></span><br><span class="line">Arr::sortRecursive();</span><br><span class="line"><span class="comment">// 使用给定的闭包过滤数组</span></span><br><span class="line">Arr::where();</span><br><span class="line"><span class="comment">// 数组&quot;洗牌&quot;</span></span><br><span class="line">Arr::shuffle(<span class="variable">$array</span>,<span class="string">&#x27;I-AM-GROOT&#x27;</span>);</span><br><span class="line"><span class="comment">// 数组包裹(如果不是数组，就变成数组，如果是空的，返回[],否则返回原数据）</span></span><br><span class="line">Arr::wrap(<span class="variable">$array</span>);</span><br><span class="line"><span class="comment">// 返回给定数组的第一个元素</span></span><br><span class="line">head(<span class="variable">$array</span>);</span><br><span class="line"><span class="comment">// 返回给定数组的最后一个元素</span></span><br><span class="line">last(<span class="variable">$array</span>);</span><br></pre></td></tr></table></figure>

<h3 id="路径"><a href="#路径" class="headerlink" title="路径"></a>路径</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 取得 app 文件夹的完整路径</span></span><br><span class="line">app_path();</span><br><span class="line"><span class="comment">// 取得项目根目录的完整路径</span></span><br><span class="line">base_path();</span><br><span class="line"><span class="comment">// 取得应用配置目录的完整路径</span></span><br><span class="line">config_path();</span><br><span class="line"><span class="comment">// 取得应用数据库目录的完整路径</span></span><br><span class="line">database_path();</span><br><span class="line"><span class="comment">// 取得加上版本号的 Elixir 文件路径</span></span><br><span class="line">elixir();</span><br><span class="line"><span class="comment">// 取得 public 目录的完整路径</span></span><br><span class="line">public_path();</span><br><span class="line"><span class="comment">// 取得 storage 目录的完整路径</span></span><br><span class="line">storage_path();</span><br></pre></td></tr></table></figure>

<h3 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 将给定的字符串转换成 驼峰式命名</span></span><br><span class="line">Str::camel(<span class="variable">$value</span>);</span><br><span class="line"><span class="comment">// 返回不包含命名空间的类名称</span></span><br><span class="line">class_basename(<span class="variable">$class</span>);</span><br><span class="line">class_basename(<span class="variable">$object</span>);</span><br><span class="line"><span class="comment">// 对给定字符串运行 htmlentities</span></span><br><span class="line">e(<span class="string">&#x27;&lt;html&gt;&#x27;</span>);</span><br><span class="line"><span class="comment">// 判断字符串开头是否为给定内容</span></span><br><span class="line">Str::startsWith(<span class="string">&#x27;Foo bar.&#x27;</span>, <span class="string">&#x27;Foo&#x27;</span>);</span><br><span class="line"><span class="comment">// 判断给定字符串结尾是否为指定内容</span></span><br><span class="line">Str::endsWith(<span class="string">&#x27;Foo bar.&#x27;</span>, <span class="string">&#x27;bar.&#x27;</span>);</span><br><span class="line"><span class="comment">// 将给定的字符串转换成 蛇形命名</span></span><br><span class="line">Str::snake(<span class="string">&#x27;fooBar&#x27;</span>);</span><br><span class="line"><span class="comment">// 将给定字符串转换成「首字大写命名」: FooBar</span></span><br><span class="line">Str::studly(<span class="string">&#x27;foo_bar&#x27;</span>);</span><br><span class="line"><span class="comment">// 根据你的本地化文件翻译给定的语句</span></span><br><span class="line">trans(<span class="string">&#x27;foo.bar&#x27;</span>);</span><br><span class="line"><span class="comment">// 根据后缀变化翻译给定的语句</span></span><br><span class="line">trans_choice(<span class="string">&#x27;foo.bar&#x27;</span>, <span class="variable">$count</span>);</span><br></pre></td></tr></table></figure>

<h3 id="URLs-and-Links"><a href="#URLs-and-Links" class="headerlink" title="URLs and Links"></a>URLs and Links</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 产生给定控制器行为网址</span></span><br><span class="line">action(<span class="string">&#x27;FooController@method&#x27;</span>, <span class="variable">$parameters</span>);</span><br><span class="line"><span class="comment">// 根据目前请求的协定（HTTP 或 HTTPS）产生资源文件网址</span></span><br><span class="line">asset(<span class="string">&#x27;img/photo.jpg&#x27;</span>, <span class="variable">$title</span>, <span class="variable">$attributes</span>);</span><br><span class="line"><span class="comment">// 根据 HTTPS 产生资源文件网址</span></span><br><span class="line">secure_asset(<span class="string">&#x27;img/photo.jpg&#x27;</span>, <span class="variable">$title</span>, <span class="variable">$attributes</span>);</span><br><span class="line"><span class="comment">// 产生给定路由名称网址</span></span><br><span class="line">route(<span class="variable">$route</span>, <span class="variable">$parameters</span>, <span class="variable">$absolute</span> = <span class="literal">true</span>);</span><br><span class="line"><span class="comment">// 产生给定路径的完整网址</span></span><br><span class="line">url(<span class="string">&#x27;path&#x27;</span>, <span class="variable">$parameters</span> = <span class="keyword">array</span>(), <span class="variable">$secure</span> = <span class="literal">null</span>);</span><br></pre></td></tr></table></figure>

<h3 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 返回一个认证器实例。你可以使用它取代 Auth facade</span></span><br><span class="line">auth()-&gt;user();</span><br><span class="line"><span class="comment">// 产生一个重定向回应让用户回到之前的位置</span></span><br><span class="line">back();</span><br><span class="line"><span class="comment">// 使用 Bcrypt 哈希给定的数值。你可以使用它替代 Hash facade</span></span><br><span class="line">bcrypt(<span class="string">&#x27;my-secret-password&#x27;</span>);</span><br><span class="line"><span class="comment">// 从给定的项目产生集合实例</span></span><br><span class="line">collect([<span class="string">&#x27;taylor&#x27;</span>, <span class="string">&#x27;abigail&#x27;</span>]);</span><br><span class="line"><span class="comment">// 取得设置选项的设置值</span></span><br><span class="line">config(<span class="string">&#x27;app.timezone&#x27;</span>, <span class="variable">$default</span>);</span><br><span class="line"><span class="comment">// 产生包含 CSRF 令牌内容的 HTML 表单隐藏字段</span></span><br><span class="line">&#123;!! csrf_field() !!&#125; </span><br><span class="line"><span class="comment">// 5.7+用这个</span></span><br><span class="line">@csrf</span><br><span class="line"><span class="comment">// 取得当前 CSRF 令牌的内容</span></span><br><span class="line"><span class="variable">$token</span> = csrf_token();</span><br><span class="line"><span class="comment">// 输出给定变量并结束脚本运行</span></span><br><span class="line">dd(<span class="variable">$value</span>);</span><br><span class="line"><span class="comment">// var_dump缩写（如果用dump-server,var_dump可能无效）</span></span><br><span class="line">dump(<span class="variable">$value</span>);</span><br><span class="line"><span class="comment">// 取得环境变量值或返回默认值</span></span><br><span class="line"><span class="variable">$env</span> = env(<span class="string">&#x27;APP_ENV&#x27;</span>);</span><br><span class="line"><span class="variable">$env</span> = env(<span class="string">&#x27;APP_ENV&#x27;</span>, <span class="string">&#x27;production&#x27;</span>);</span><br><span class="line"><span class="comment">// 配送给定事件到所属的侦听器</span></span><br><span class="line">event(<span class="keyword">new</span> UserRegistered(<span class="variable">$user</span>));</span><br><span class="line"><span class="comment">// 根据给定类、名称以及总数产生模型工厂建构器</span></span><br><span class="line"><span class="variable">$user</span> = factory(App\User::class)-&gt;make();</span><br><span class="line"><span class="comment">// 产生拟造 HTTP 表单动作内容的 HTML 表单隐藏字段</span></span><br><span class="line">&#123;!! method_field(<span class="string">&#x27;delete&#x27;</span>) !!&#125;</span><br><span class="line"><span class="comment">// 5.7+</span></span><br><span class="line">@method(<span class="string">&#x27;delete&#x27;</span>)</span><br><span class="line"><span class="comment">// 取得快闪到 session 的旧有输入数值</span></span><br><span class="line"><span class="variable">$value</span> = old(<span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="variable">$value</span> = old(<span class="string">&#x27;value&#x27;</span>, <span class="string">&#x27;default&#x27;</span>);</span><br><span class="line"><span class="comment">// 返回重定向器实例以进行 重定向</span></span><br><span class="line"> <span class="keyword">return</span> redirect(<span class="string">&#x27;/home&#x27;</span>);</span><br><span class="line"><span class="comment">// 取得目前的请求实例或输入的项目</span></span><br><span class="line"><span class="variable">$value</span> = request(<span class="string">&#x27;key&#x27;</span>, <span class="variable">$default</span> = <span class="literal">null</span>)</span><br><span class="line"><span class="comment">// 创建一个回应实例或获取一个回应工厂实例</span></span><br><span class="line"><span class="keyword">return</span> response(<span class="string">&#x27;Hello World&#x27;</span>, <span class="number">200</span>, <span class="variable">$headers</span>);</span><br><span class="line"><span class="comment">// 可被用于取得或设置单一 session 内容</span></span><br><span class="line"><span class="variable">$value</span> = session(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line"><span class="comment">// 在没有传递参数时，将返回 session 实例</span></span><br><span class="line"><span class="variable">$value</span> = session()-&gt;get(<span class="string">&#x27;key&#x27;</span>);</span><br><span class="line">session()-&gt;put(<span class="string">&#x27;key&#x27;</span>, <span class="variable">$value</span>);</span><br><span class="line"><span class="comment">// 返回给定数值</span></span><br><span class="line">value(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123; <span class="keyword">return</span> <span class="string">&#x27;bar&#x27;</span>; &#125;);</span><br><span class="line"><span class="comment">// 取得视图 实例</span></span><br><span class="line"><span class="keyword">return</span> view(<span class="string">&#x27;auth.login&#x27;</span>);</span><br><span class="line"><span class="comment">// 返回给定的数值</span></span><br><span class="line"><span class="variable">$value</span> = with(<span class="keyword">new</span> Foo)-&gt;work();</span><br></pre></td></tr></table></figure>

<h2 id="View"><a href="#View" class="headerlink" title="View"></a>View</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">View::make(<span class="string">&#x27;path/to/view&#x27;</span>);</span><br><span class="line">View::make(<span class="string">&#x27;foo/bar&#x27;</span>)-&gt;with(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line">View::make(<span class="string">&#x27;foo/bar&#x27;</span>)-&gt;withKey(<span class="string">&#x27;value&#x27;</span>);</span><br><span class="line">View::make(<span class="string">&#x27;foo/bar&#x27;</span>, <span class="keyword">array</span>(<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>));</span><br><span class="line">View::exists(<span class="string">&#x27;foo/bar&#x27;</span>);</span><br><span class="line"><span class="comment">// 跨视图共享变量</span></span><br><span class="line">View::share(<span class="string">&#x27;key&#x27;</span>, <span class="string">&#x27;value&#x27;</span>);</span><br><span class="line"><span class="comment">// 视图嵌套</span></span><br><span class="line">View::make(<span class="string">&#x27;foo/bar&#x27;</span>)-&gt;nest(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;foo/baz&#x27;</span>, <span class="variable">$data</span>);</span><br><span class="line"><span class="comment">// 注册一个视图构造器</span></span><br><span class="line">View::composer(<span class="string">&#x27;viewname&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$view</span></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 注册多个视图到一个视图构造器中</span></span><br><span class="line">View::composer(<span class="keyword">array</span>(<span class="string">&#x27;view1&#x27;</span>, <span class="string">&#x27;view2&#x27;</span>), <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$view</span></span>)</span>&#123;&#125;);</span><br><span class="line"><span class="comment">// 注册一个视图构造器类</span></span><br><span class="line">View::composer(<span class="string">&#x27;viewname&#x27;</span>, <span class="string">&#x27;FooComposer&#x27;</span>);</span><br><span class="line">View::creator(<span class="string">&#x27;viewname&#x27;</span>, <span class="function"><span class="keyword">function</span>(<span class="params"><span class="variable">$view</span></span>)</span>&#123;&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="Blade"><a href="#Blade" class="headerlink" title="Blade"></a>Blade</h2><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 输出内容，被转义过的</span></span><br><span class="line">&#123;&#123; <span class="variable">$var</span> &#125;&#125;</span><br><span class="line"><span class="comment">// 输出未转义内容</span></span><br><span class="line">&#123;!! <span class="variable">$var</span> !!&#125;</span><br><span class="line">&#123;&#123;-- Blade 注释，不会被输出到页面中 --&#125;&#125;</span><br><span class="line"><span class="comment">// 三元表达式的简写，以下相当于「isset($name) ? $name : &#x27;Default&#x27;」</span></span><br><span class="line">&#123;&#123; <span class="variable">$name</span> ?? <span class="string">&#x27;Default&#x27;</span> &#125;&#125;</span><br><span class="line"><span class="comment">// 等同 echo json_encode($array);</span></span><br><span class="line">@json(<span class="variable">$array</span>);</span><br><span class="line"><span class="comment">// 禁用 HTML 实体双重编码</span></span><br><span class="line">Blade::withoutDoubleEncoding();</span><br><span class="line"><span class="comment">// 书写 PHP 代码</span></span><br><span class="line">@php </span><br><span class="line">@endphp</span><br><span class="line">@csrf <span class="comment">// CSRF 域</span></span><br><span class="line">@method(<span class="string">&#x27;PUT&#x27;</span>) <span class="comment">// HTML 表单伪造方法 _method</span></span><br><span class="line"><span class="comment">// 服务容器注入，后调用 &#123;&#123; $metrics-&gt;monthlyRevenue() &#125;&#125;</span></span><br><span class="line">@inject(<span class="string">&#x27;metrics&#x27;</span>, <span class="string">&#x27;App\Services\MetricsService&#x27;</span>)</span><br></pre></td></tr></table></figure>

<h3 id="包含和继承"><a href="#包含和继承" class="headerlink" title="包含和继承"></a>包含和继承</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 扩展布局模板</span></span><br><span class="line">@<span class="keyword">extends</span>(<span class="string">&#x27;layout.name&#x27;</span>)</span><br><span class="line"><span class="comment">// 区块占位</span></span><br><span class="line">@<span class="keyword">yield</span>(<span class="string">&#x27;name&#x27;</span>)</span><br><span class="line"><span class="comment">// 第一种、直接填入扩展内容</span></span><br><span class="line">@section(<span class="string">&#x27;title&#x27;</span>,  <span class="string">&#x27;Page Title&#x27;</span>)</span><br><span class="line"><span class="comment">// 第二种、实现命名为 name 的区块（yield 占位的地方）</span></span><br><span class="line">@section(<span class="string">&#x27;sidebar&#x27;</span>)</span><br><span class="line">    <span class="comment">// 继承父模板内容</span></span><br><span class="line">    @<span class="built_in">parent</span></span><br><span class="line">@endsection</span><br><span class="line"><span class="comment">// 可继承内容区块</span></span><br><span class="line">@section(<span class="string">&#x27;sidebar&#x27;</span>)</span><br><span class="line">@show</span><br><span class="line"><span class="comment">// 继承父模板内容（@show 的区块内容）</span></span><br><span class="line">@<span class="built_in">parent</span></span><br><span class="line"><span class="comment">// 包含子视图</span></span><br><span class="line">@<span class="keyword">include</span>(<span class="string">&#x27;view.name&#x27;</span>)</span><br><span class="line"><span class="comment">// 包含子视图，并传参</span></span><br><span class="line">@<span class="keyword">include</span>(<span class="string">&#x27;view.name&#x27;</span>, [<span class="string">&#x27;key&#x27;</span> =&gt; <span class="string">&#x27;value&#x27;</span>]);</span><br><span class="line">@includeIf(<span class="string">&#x27;view.name&#x27;</span>,  [<span class="string">&#x27;some&#x27;</span>  =&gt;  <span class="string">&#x27;data&#x27;</span>])</span><br><span class="line">@includeWhen(<span class="variable">$boolean</span>,  <span class="string">&#x27;view.name&#x27;</span>,  [<span class="string">&#x27;some&#x27;</span>  =&gt;  <span class="string">&#x27;data&#x27;</span>])</span><br><span class="line"><span class="comment">// 包含给定视图数组中第一个存在的视图</span></span><br><span class="line">@includeFirst([<span class="string">&#x27;custom.admin&#x27;</span>,  <span class="string">&#x27;admin&#x27;</span>],  [<span class="string">&#x27;some&#x27;</span>  =&gt;  <span class="string">&#x27;data&#x27;</span>])</span><br><span class="line"><span class="comment">// 加载本地化语句</span></span><br><span class="line">@lang(<span class="string">&#x27;messages.name&#x27;</span>)</span><br><span class="line">@choice(<span class="string">&#x27;messages.name&#x27;</span>, <span class="number">1</span>);</span><br><span class="line"><span class="comment">// 检查片断是否存在</span></span><br><span class="line">@hasSection(<span class="string">&#x27;navigation&#x27;</span>)</span><br><span class="line">        @<span class="keyword">yield</span>(<span class="string">&#x27;navigation&#x27;</span>)</span><br><span class="line">@<span class="keyword">endif</span></span><br><span class="line"><span class="comment">// 迭代 jobs 数组并包含</span></span><br><span class="line">@each(<span class="string">&#x27;view.name&#x27;</span>,  <span class="variable">$jobs</span>,  <span class="string">&#x27;job&#x27;</span>)</span><br><span class="line">@each(<span class="string">&#x27;view.name&#x27;</span>,  <span class="variable">$jobs</span>,  <span class="string">&#x27;job&#x27;</span>,  <span class="string">&#x27;view.empty&#x27;</span>)</span><br><span class="line"><span class="comment">// 堆栈</span></span><br><span class="line">@stack(<span class="string">&#x27;scripts&#x27;</span>)</span><br><span class="line">@push(<span class="string">&#x27;scripts&#x27;</span>)</span><br><span class="line">    &lt;script src=<span class="string">&quot;/example.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line">@endpush</span><br><span class="line"><span class="comment">// 栈顶插入</span></span><br><span class="line">@prepend(<span class="string">&#x27;scripts&#x27;</span>)</span><br><span class="line">@endprepend</span><br><span class="line"><span class="comment">// 组件</span></span><br><span class="line">@component(<span class="string">&#x27;alert&#x27;</span>, [<span class="string">&#x27;foo&#x27;</span> =&gt; <span class="string">&#x27;bar&#x27;</span>])</span><br><span class="line">    @slot(<span class="string">&#x27;title&#x27;</span>)</span><br><span class="line">    @endslot</span><br><span class="line">@endcomponent</span><br><span class="line"><span class="comment">// 注册别名 @alert([&#x27;type&#x27; =&gt; &#x27;danger&#x27;])...@endalert</span></span><br><span class="line">Blade::component(<span class="string">&#x27;components.alert&#x27;</span>,  <span class="string">&#x27;alert&#x27;</span>);</span><br></pre></td></tr></table></figure>

<h3 id="条件语句"><a href="#条件语句" class="headerlink" title="条件语句"></a>条件语句</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">if</span> (count(<span class="variable">$records</span>) === <span class="number">1</span>)</span><br><span class="line">@<span class="keyword">elseif</span>  (count(<span class="variable">$records</span>) &gt; <span class="number">1</span>)</span><br><span class="line">@<span class="keyword">else</span></span><br><span class="line">@<span class="keyword">endif</span></span><br><span class="line"><span class="comment">// 登录情况下</span></span><br><span class="line">@unless (Auth::check())</span><br><span class="line">@endunless</span><br><span class="line"><span class="comment">// $records 被定义且不是  null...</span></span><br><span class="line">@<span class="keyword">isset</span>(<span class="variable">$records</span>)</span><br><span class="line">@endisset</span><br><span class="line"><span class="comment">// $records 为空...</span></span><br><span class="line">@<span class="keyword">empty</span>(<span class="variable">$records</span>)</span><br><span class="line">@endempty</span><br><span class="line"><span class="comment">// 此用户身份已验证...</span></span><br><span class="line">@auth <span class="comment">// 或 @auth(&#x27;admin&#x27;)</span></span><br><span class="line">@endauth</span><br><span class="line"><span class="comment">// 此用户身份未验证...</span></span><br><span class="line">@guest <span class="comment">// 或 @guest(&#x27;admin&#x27;)</span></span><br><span class="line">@endguest</span><br><span class="line">@<span class="keyword">switch</span>(<span class="variable">$i</span>)</span><br><span class="line">    @<span class="keyword">case</span>(<span class="number">1</span>)</span><br><span class="line">        @<span class="keyword">break</span></span><br><span class="line">    @<span class="keyword">default</span></span><br><span class="line">        <span class="comment">// 默认</span></span><br><span class="line">@<span class="keyword">endswitch</span></span><br></pre></td></tr></table></figure>

<h3 id="循环"><a href="#循环" class="headerlink" title="循环"></a>循环</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// for 循环</span></span><br><span class="line">@<span class="keyword">for</span> (<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; <span class="number">10</span>; <span class="variable">$i</span>++)</span><br><span class="line">@<span class="keyword">endfor</span></span><br><span class="line"><span class="comment">// foreach 迭代</span></span><br><span class="line">@<span class="keyword">foreach</span> (<span class="variable">$users</span> <span class="keyword">as</span> <span class="variable">$user</span>)</span><br><span class="line">@<span class="keyword">endforeach</span></span><br><span class="line"><span class="comment">// 迭代如果为空的话</span></span><br><span class="line">@forelse (<span class="variable">$users</span> <span class="keyword">as</span> <span class="variable">$user</span>)</span><br><span class="line">@<span class="keyword">empty</span></span><br><span class="line">@endforelse</span><br><span class="line"><span class="comment">// while 循环</span></span><br><span class="line">@<span class="keyword">while</span> (<span class="literal">true</span>)</span><br><span class="line">@<span class="keyword">endwhile</span></span><br><span class="line"><span class="comment">// 终结循环</span></span><br><span class="line">@<span class="keyword">continue</span></span><br><span class="line">@<span class="keyword">continue</span>(<span class="variable">$user</span>-&gt;type  ==  <span class="number">1</span>) <span class="comment">// 带条件</span></span><br><span class="line"><span class="comment">// 跳过本次迭代</span></span><br><span class="line">@<span class="keyword">break</span></span><br><span class="line">@<span class="keyword">break</span>(<span class="variable">$user</span>-&gt;number  ==  <span class="number">5</span>) <span class="comment">// 带条件</span></span><br><span class="line"><span class="comment">// 循环变量</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;index        <span class="comment">// 当前迭代的索引（从 0 开始计数）。</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;iteration    <span class="comment">// 当前循环迭代 (从 1 开始计算）。</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;remaining    <span class="comment">// 循环中剩余迭代的数量。</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;count        <span class="comment">// 被迭代的数组元素的总数。</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;first        <span class="comment">// 是否为循环的第一次迭代。</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;last         <span class="comment">// 是否为循环的最后一次迭代。</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;depth        <span class="comment">// 当前迭代的嵌套深度级数。</span></span><br><span class="line"><span class="variable">$loop</span>-&gt;parent       <span class="comment">// 嵌套循环中，父循环的循环变量</span></span><br></pre></td></tr></table></figure>

<h3 id="JavaScript-代码"><a href="#JavaScript-代码" class="headerlink" title="JavaScript 代码"></a>JavaScript 代码</h3><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// JS 框架，保留双大括号，以下会编译为 &#123;&#123; name &#125;&#125;</span></span><br><span class="line">@&#123;&#123; name &#125;&#125;</span><br><span class="line"><span class="comment">// 大段 JavaScript 变量，verbatim 里模板引擎将不解析</span></span><br><span class="line">@verbatim</span><br><span class="line">        Hello, &#123;&#123; javascriptVariableName &#125;&#125;.</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Laravel/" rel="tag"># Laravel</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/idea_with_program/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F-%E6%A6%82%E8%A6%81/" rel="prev" title="「编程思想」设计模式">
      <i class="fa fa-chevron-left"></i> 「编程思想」设计模式
    </a></div>
      <div class="post-nav-item">
    <a href="/laravel/laravel-Eloquent%E6%A8%A1%E5%9E%8B%E7%9A%84%E5%B8%B8%E8%A7%81%E7%94%A8%E6%B3%95/" rel="next" title="「Laravel」Eloquent模型的常见用法">
      「Laravel」Eloquent模型的常见用法 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Composer"><span class="nav-text">Composer</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Artisan"><span class="nav-text">Artisan</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Container"><span class="nav-text">Container</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Environment"><span class="nav-text">Environment</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Config"><span class="nav-text">Config</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Lang"><span class="nav-text">Lang</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Log"><span class="nav-text">Log</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%B0%E5%BD%95-SQL-%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5"><span class="nav-text">记录 SQL 查询语句</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#File"><span class="nav-text">File</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Storage"><span class="nav-text">Storage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Schema"><span class="nav-text">Schema</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B4%A2%E5%BC%95"><span class="nav-text">索引</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%96%E9%94%AE"><span class="nav-text">外键</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B"><span class="nav-text">字段类型</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Route"><span class="nav-text">Route</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E8%B7%AF%E7%94%B1"><span class="nav-text">资源路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A6%E5%8F%91%E9%94%99%E8%AF%AF"><span class="nav-text">触发错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%8F%82%E6%95%B0"><span class="nav-text">路由参数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="nav-text">HTTP 请求方式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E5%85%A8%E8%B7%AF%E7%94%B1-TBD"><span class="nav-text">安全路由 (TBD)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E7%BA%A6%E6%9D%9F"><span class="nav-text">路由约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HTTP-%E4%B8%AD%E9%97%B4%E4%BB%B6"><span class="nav-text">HTTP 中间件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%91%BD%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="nav-text">命名路由</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%89%8D%E7%BC%80"><span class="nav-text">路由前缀</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E7%94%B1%E5%91%BD%E5%90%8D%E7%A9%BA%E9%97%B4"><span class="nav-text">路由命名空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%90%E5%9F%9F%E5%90%8D%E8%B7%AF%E7%94%B1"><span class="nav-text">子域名路由</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#URL"><span class="nav-text">URL</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cookie"><span class="nav-text">Cookie</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session"><span class="nav-text">Session</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Request"><span class="nav-text">Request</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Response"><span class="nav-text">Response</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Redirect"><span class="nav-text">Redirect</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Input"><span class="nav-text">Input</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BC%9A%E8%AF%9D%E5%91%A8%E6%9C%9F%E5%86%85-Input"><span class="nav-text">会话周期内 Input</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Files"><span class="nav-text">Files</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Validation"><span class="nav-text">Validation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E8%A7%84%E5%88%99"><span class="nav-text">验证规则</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Auth"><span class="nav-text">Auth</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E8%AE%A4%E8%AF%81"><span class="nav-text">用户认证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E6%8E%88%E6%9D%83"><span class="nav-text">用户授权</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Event"><span class="nav-text">Event</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Security"><span class="nav-text">Security</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%93%88%E5%B8%8C"><span class="nav-text">哈希</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E5%AF%86%E8%A7%A3%E5%AF%86"><span class="nav-text">加密解密</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Queue"><span class="nav-text">Queue</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Mail"><span class="nav-text">Mail</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B6%88%E6%81%AF"><span class="nav-text">消息</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cache"><span class="nav-text">Cache</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DB"><span class="nav-text">DB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-text">基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%AF%AD%E5%8F%A5%E6%9E%84%E9%80%A0%E5%99%A8"><span class="nav-text">查询语句构造器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Joins"><span class="nav-text">Joins</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%81%9A%E5%90%88"><span class="nav-text">聚合</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E5%A7%8B%E8%A1%A8%E8%BE%BE%E5%8F%A5"><span class="nav-text">原始表达句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Inserts-Updates-Deletes-Unions-Pessimistic-Locking"><span class="nav-text">Inserts &#x2F; Updates &#x2F; Deletes &#x2F; Unions &#x2F; Pessimistic Locking</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Model"><span class="nav-text">Model</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E4%BD%BF%E7%94%A8"><span class="nav-text">基础使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#More"><span class="nav-text">More</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AF%E5%88%A0%E9%99%A4"><span class="nav-text">软删除</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A8%A1%E5%9E%8B%E5%85%B3%E8%81%94"><span class="nav-text">模型关联</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BA%8B%E4%BB%B6"><span class="nav-text">事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Eloquent-%E9%85%8D%E7%BD%AE%E4%BF%A1%E6%81%AF"><span class="nav-text">Eloquent 配置信息</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Pagination"><span class="nav-text">Pagination</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UnitTest"><span class="nav-text">UnitTest</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%92%8C%E8%BF%90%E8%A1%8C"><span class="nav-text">安装和运行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%AD%E8%A8%80"><span class="nav-text">断言</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BF%E9%97%AE%E8%B7%AF%E7%94%B1"><span class="nav-text">访问路由</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Collection"><span class="nav-text">Collection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#String"><span class="nav-text">String</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Helper"><span class="nav-text">Helper</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84-amp-%E5%AF%B9%E8%B1%A1"><span class="nav-text">数组 &amp; 对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B7%AF%E5%BE%84"><span class="nav-text">路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="nav-text">字符串</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#URLs-and-Links"><span class="nav-text">URLs and Links</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E4%BB%96"><span class="nav-text">其他</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#View"><span class="nav-text">View</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Blade"><span class="nav-text">Blade</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%85%E5%90%AB%E5%92%8C%E7%BB%A7%E6%89%BF"><span class="nav-text">包含和继承</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E8%AF%AD%E5%8F%A5"><span class="nav-text">条件语句</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BE%AA%E7%8E%AF"><span class="nav-text">循环</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JavaScript-%E4%BB%A3%E7%A0%81"><span class="nav-text">JavaScript 代码</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">Senkorl</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">15</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">7</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>
    
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/muse.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
